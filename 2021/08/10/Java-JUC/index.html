<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Java_JUC | blog of Jungle</title>
  <meta name="keywords" content=" 多线程 ">
  <meta name="description" content="Java_JUC | blog of Jungle">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="个人介绍jungle   本科毕业于CUIT, 目前在沈阳读研(参加了沈阳化工大学和中科院沈阳计算所联合培养1+2项目). 喜欢学习新技术 成为一个合格的程序员, 一定要学好三样东西: 数学 情商 财商     最近什么的干活 深度学习入门中… Java大法好   联系方式 email: &amp;#106;&amp;#x75;&amp;#x6e;&amp;#x67;&amp;#108;&amp;#101;&amp;#56;&amp;#56;&amp;#x38;&amp;#x">
<meta property="og:type" content="website">
<meta property="og:title" content="个人简介">
<meta property="og:url" content="http://example.com/about/index.html">
<meta property="og:site_name" content="blog of Jungle">
<meta property="og:description" content="个人介绍jungle   本科毕业于CUIT, 目前在沈阳读研(参加了沈阳化工大学和中科院沈阳计算所联合培养1+2项目). 喜欢学习新技术 成为一个合格的程序员, 一定要学好三样东西: 数学 情商 财商     最近什么的干活 深度学习入门中… Java大法好   联系方式 email: &amp;#106;&amp;#x75;&amp;#x6e;&amp;#x67;&amp;#108;&amp;#101;&amp;#56;&amp;#56;&amp;#x38;&amp;#x">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-11-13T11:42:01.000Z">
<meta property="article:modified_time" content="2021-03-17T08:19:42.821Z">
<meta property="article:author" content="Jungle">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/darcula.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>Jungle</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/jungle8884" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
        <a title="zhihu" href="https://www.zhihu.com/people/jaytp/activities" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-zhihu"></use>
                </svg>
            
        </a>
        
    
        
        <a title="csdn" href="https://blog.csdn.net/jungle8884" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-csdn"></use>
                </svg>
            
        </a>
        
    
        
        <a title="email" href="mailto:jungle8884@163.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=88786971" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active" data-rel="全部文章">全部文章<small>(31)</small></div></li>
    
        
            
            <li><div data-rel="工具"><i class="fold iconfont icon-right"></i>工具<small>(7)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="工具<--->git">git<small>(3)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="工具<--->github">github<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="后端"><i class="fold iconfont icon-right"></i>后端<small>(14)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="后端<--->面经">面经<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="后端<--->设计模式">设计模式<small>(5)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="后端<--->C#">C#<small>(2)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="后端<--->Java">Java<small>(6)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="数据库"><i class="fold iconfont icon-right"></i>数据库<small>(1)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="数据库<--->MySQL">MySQL<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="前端">前端<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="运维"><i class="fold iconfont icon-right"></i>运维<small>(3)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="运维<--->Docker">Docker<small>(2)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="运维<--->shell">shell<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
            <li><div data-rel="读书"><i class="fold iconfont icon-right"></i>读书<small>(3)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="读书<--->单词">单词<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="读书<--->软件设计师">软件设计师<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="读书<--->英语">英语<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="DL"><i class="fold iconfont icon-right"></i>DL<small>(2)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="DL<--->Python">Python<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">关于</a><a style="width: 50%"  class="friends">友链</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="31">
<input type="hidden" id="yelog_site_word_count" value="106.5k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
            <li><a target="_blank" href="https://lavender-z.github.io/">橘子</a></li>
            
            <li><a target="_blank" href="https://youngxhui.top/">ISLAND</a></li>
            
            <li><a target="_blank" href="https://www.liuchuo.net/about">柳神</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>博客搭建</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>抽象工厂模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>创建型模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>单例模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>多表查询</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>多态</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>多线程</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>分布式数据库系统及原理</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>工厂方法模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>机器学习</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>集合</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>计算机专业英语</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>简单工厂模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>建造者模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>进制转换</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>镜像</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>六级</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>面试</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>爬虫</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>前端</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>容器</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>设计模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>深度学习</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>事务</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数据库的备份和还原</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数据库的设计</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>委托与事件</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>写作</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>原码, 反码, 补码, 移码</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>原型模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>约束</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Ado.net</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ArrayList</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>C#</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>DL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>github</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>http</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JavaScript</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LinkedList</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>List</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Map</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Python</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Resnet</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Set</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>shadowsocks</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>shell</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SQL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Vector</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a id="top" class="全部文章 读书 单词 "
           href="/2020/11/24/WordofCS/"
           data-tag="机器学习,深度学习,计算机专业英语,分布式数据库系统及原理"
           data-author="" >
            <span class="post-title" title="WordofCS">WordofCS</span>
            <span class="post-date" title="2020-11-24 17:21:02">2020/11/24</span>
        </a>
        
        <a id="top" class="全部文章 读书 英语 "
           href="/2020/09/18/CET-6-Writing/"
           data-tag="六级,写作"
           data-author="" >
            <span class="post-title" title="六级写作">六级写作</span>
            <span class="post-date" title="2020-09-18 10:21:32">2020/09/18</span>
        </a>
        
        <a  class="全部文章 后端 面经 "
           href="/2021/08/16/JobQuestions/"
           data-tag="面试"
           data-author="" >
            <span class="post-title" title="JobQuestions">JobQuestions</span>
            <span class="post-date" title="2021-08-16 15:26:09">2021/08/16</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/08/13/HashSet-HashMap-analyse/"
           data-tag="集合,Set,Map"
           data-author="" >
            <span class="post-title" title="HashMap">HashMap</span>
            <span class="post-date" title="2021-08-13 14:59:19">2021/08/13</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/08/13/LinkedList-analyse/"
           data-tag="集合,LinkedList"
           data-author="" >
            <span class="post-title" title="LinkedList-analyse">LinkedList-analyse</span>
            <span class="post-date" title="2021-08-13 13:19:52">2021/08/13</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/08/13/Vector-analyse/"
           data-tag="集合,List,Vector"
           data-author="" >
            <span class="post-title" title="Vector-analyse">Vector-analyse</span>
            <span class="post-date" title="2021-08-13 11:42:21">2021/08/13</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/08/13/Arraylist-analyse/"
           data-tag="集合,List,ArrayList"
           data-author="" >
            <span class="post-title" title="Arraylist_analyse">Arraylist_analyse</span>
            <span class="post-date" title="2021-08-13 08:59:00">2021/08/13</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/08/10/Java-JUC/"
           data-tag="多线程"
           data-author="" >
            <span class="post-title" title="Java_JUC">Java_JUC</span>
            <span class="post-date" title="2021-08-10 20:42:30">2021/08/10</span>
        </a>
        
        <a  class="全部文章 运维 shell "
           href="/2021/05/27/shellLearningNote/"
           data-tag="shell"
           data-author="" >
            <span class="post-title" title="shell编程">shell编程</span>
            <span class="post-date" title="2021-05-27 14:55:52">2021/05/27</span>
        </a>
        
        <a  class="全部文章 DL "
           href="/2021/05/05/Resnet/"
           data-tag="DL,Resnet"
           data-author="" >
            <span class="post-title" title="Resnet">Resnet</span>
            <span class="post-date" title="2021-05-05 00:00:00">2021/05/05</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/04/29/Java-polymorphism/"
           data-tag="多态"
           data-author="" >
            <span class="post-title" title="Java-polymorphism">Java-polymorphism</span>
            <span class="post-date" title="2021-04-29 00:00:00">2021/04/29</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/04/14/DesignPatternofBuilder/"
           data-tag="建造者模式"
           data-author="" >
            <span class="post-title" title="建造者模式">建造者模式</span>
            <span class="post-date" title="2021-04-14 00:00:00">2021/04/14</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/04/10/DesignPatternofSingleton/"
           data-tag="单例模式"
           data-author="" >
            <span class="post-title" title="单例模式">单例模式</span>
            <span class="post-date" title="2021-04-10 00:00:00">2021/04/10</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/04/09/DesignPatternofSixPrinciples/"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="DesignPatternofSixPrinciples">DesignPatternofSixPrinciples</span>
            <span class="post-date" title="2021-04-09 21:38:52">2021/04/09</span>
        </a>
        
        <a  class="全部文章 前端 "
           href="/2021/04/09/JavaScript-Note/"
           data-tag="前端,JavaScript"
           data-author="" >
            <span class="post-title" title="JavaScript">JavaScript</span>
            <span class="post-date" title="2021-04-09 14:27:00">2021/04/09</span>
        </a>
        
        <a  class="全部文章 运维 Docker "
           href="/2021/04/09/DockerPractice/"
           data-tag="Docker,DL"
           data-author="" >
            <span class="post-title" title="DockerPractice">DockerPractice</span>
            <span class="post-date" title="2021-04-09 00:00:00">2021/04/09</span>
        </a>
        
        <a  class="全部文章 工具 git "
           href="/2021/04/06/GitLearningNote-2/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="git学习笔记">git学习笔记</span>
            <span class="post-date" title="2021-04-06 00:00:00">2021/04/06</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/04/02/DesignPatternofPrototype/"
           data-tag="原型模式"
           data-author="" >
            <span class="post-title" title="原型模式">原型模式</span>
            <span class="post-date" title="2021-04-02 00:00:00">2021/04/02</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/03/30/DesignPatternofFactory/"
           data-tag="创建型模式,简单工厂模式,工厂方法模式,抽象工厂模式"
           data-author="" >
            <span class="post-title" title="工厂模式">工厂模式</span>
            <span class="post-date" title="2021-03-30 00:00:00">2021/03/30</span>
        </a>
        
        <a  class="全部文章 数据库 MySQL "
           href="/2021/03/23/MySQLearningNote/"
           data-tag="SQL,约束,数据库的设计,数据库的备份和还原,多表查询,事务"
           data-author="" >
            <span class="post-title" title="MySQL学习笔记">MySQL学习笔记</span>
            <span class="post-date" title="2021-03-23 00:00:00">2021/03/23</span>
        </a>
        
        <a  class="全部文章 运维 Docker "
           href="/2021/03/19/DockerLearningNoteBase/"
           data-tag="docker,镜像,容器"
           data-author="" >
            <span class="post-title" title="Docker学习笔记">Docker学习笔记</span>
            <span class="post-date" title="2021-03-19 00:00:00">2021/03/19</span>
        </a>
        
        <a  class="全部文章 后端 C# "
           href="/2020/10/16/Ado-.net/"
           data-tag="C#,Ado.net"
           data-author="" >
            <span class="post-title" title="Ado.net">Ado.net</span>
            <span class="post-date" title="2020-10-16 00:00:00">2020/10/16</span>
        </a>
        
        <a  class="全部文章 工具 github "
           href="/2020/10/12/GitHubSearch/"
           data-tag="github"
           data-author="" >
            <span class="post-title" title="学会在github上搜索项目">学会在github上搜索项目</span>
            <span class="post-date" title="2020-10-12 13:55:57">2020/10/12</span>
        </a>
        
        <a  class="全部文章 后端 C# "
           href="/2020/09/21/Event-publisher-subscriber/"
           data-tag="C#,委托与事件"
           data-author="" >
            <span class="post-title" title="Event_publisher_subscriber">Event_publisher_subscriber</span>
            <span class="post-date" title="2020-09-21 15:17:32">2020/09/21</span>
        </a>
        
        <a  class="全部文章 读书 软件设计师 "
           href="/2019/12/16/SoftwareDesignTest/"
           data-tag="原码, 反码, 补码, 移码,进制转换"
           data-author="" >
            <span class="post-title" title="软件设计师">软件设计师</span>
            <span class="post-date" title="2019-12-16 10:46:08">2019/12/16</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2019/12/03/douban-spider/"
           data-tag="Python,爬虫"
           data-author="" >
            <span class="post-title" title="豆瓣排行榜小爬虫">豆瓣排行榜小爬虫</span>
            <span class="post-date" title="2019-12-03 00:00:00">2019/12/03</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2019/09/30/Crawler/"
           data-tag="爬虫,http"
           data-author="" >
            <span class="post-title" title="什么是网络爬虫">什么是网络爬虫</span>
            <span class="post-date" title="2019-09-30 14:35:05">2019/09/30</span>
        </a>
        
        <a  class="全部文章 DL Python "
           href="/2019/08/31/PythonNote/"
           data-tag="Python"
           data-author="" >
            <span class="post-title" title="Python学习笔记">Python学习笔记</span>
            <span class="post-date" title="2019-08-31 14:28:16">2019/08/31</span>
        </a>
        
        <a  class="全部文章 工具 git "
           href="/2019/08/10/HowToMakeBlog/"
           data-tag="博客搭建"
           data-author="" >
            <span class="post-title" title="搭建hexo博客">搭建hexo博客</span>
            <span class="post-date" title="2019-08-10 00:00:00">2019/08/10</span>
        </a>
        
        <a  class="全部文章 工具 git "
           href="/2019/06/13/GitLearningNote-1/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="git 初试">git 初试</span>
            <span class="post-date" title="2019-06-13 00:00:00">2019/06/13</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2019/06/13/On-the-Internet-Scientifically/"
           data-tag="shadowsocks"
           data-author="" >
            <span class="post-title" title="科学上网">科学上网</span>
            <span class="post-date" title="2019-06-13 00:00:00">2019/06/13</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Java-JUC" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Java_JUC</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="后端">后端</a> > 
            
            <a  data-rel="后端&lt;---&gt;Java">Java</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color4">多线程</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2021-08-23 18:16:23'>2021-08-10 20:42</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:6.5k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Thread"><span class="toc-text">Thread</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%81%AB%E8%BD%A6%E7%A5%A8%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8A%A2%E7%A5%A8"><span class="toc-text">火车票多线程抢票</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9D%E5%A7%8B%E6%9E%84%E6%80%9D"><span class="toc-text">1. 初始构思</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8%E5%A4%96%E9%83%A8%E5%81%9C%E6%AD%A2%E6%96%B9%E5%BC%8F"><span class="toc-text">2. 使用外部停止方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E7%BA%BF%E7%A8%8B%E4%B8%8D%E5%AE%89%E5%85%A8"><span class="toc-text">3. 怎么解决线程不安全?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CopyOnWriteArrayList"><span class="toc-text">CopyOnWriteArrayList</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Collections-synchronizedList"><span class="toc-text">Collections.synchronizedList()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ThreadPoolExecutor"><span class="toc-text">ThreadPoolExecutor</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E8%80%85%E5%92%8C%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98"><span class="toc-text">生产者和消费者问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%A8%8B%E6%B3%95"><span class="toc-text">管程法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E7%81%AF%E6%B3%95"><span class="toc-text">信号灯法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E5%81%87%E5%94%A4%E9%86%92"><span class="toc-text">虚假唤醒</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%B0%E7%9A%84%E5%86%99%E6%B3%95%E2%80%94%E9%99%8D%E4%BD%8E%E8%80%A6%E5%90%88%E5%BA%A6"><span class="toc-text">新的写法—降低耦合度</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E9%A1%BE"><span class="toc-text">回顾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#synchronized%E9%94%81"><span class="toc-text">synchronized锁</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lock%E9%94%81"><span class="toc-text">Lock锁</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#java-util-ConcurrentModificationException-%E5%B9%B6%E5%8F%91%E4%BF%AE%E6%94%B9%E5%BC%82%E5%B8%B8"><span class="toc-text">java.util.ConcurrentModificationException 并发修改异常</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#List-%E4%BF%AE%E6%94%B9%E4%B8%8D%E5%AE%89%E5%85%A8"><span class="toc-text">List 修改不安全</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set-%E4%BF%AE%E6%94%B9%E4%B8%8D%E5%AE%89%E5%85%A8"><span class="toc-text">Set 修改不安全</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Map%E4%BF%AE%E6%94%B9%E4%B8%8D%E5%AE%89%E5%85%A8"><span class="toc-text">Map修改不安全</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Thread"><a href="#Thread" class="headerlink" title="Thread"></a>Thread</h1><img src="/2021/08/10/Java-JUC/image-20210810204411592.png" alt="image-20210810204411592" style="zoom:67%;">

<h2 id="火车票多线程抢票"><a href="#火车票多线程抢票" class="headerlink" title="火车票多线程抢票"></a>火车票多线程抢票</h2><h3 id="1-初始构思"><a href="#1-初始构思" class="headerlink" title="1. 初始构思"></a>1. 初始构思</h3><blockquote>
<p>思路：</p>
<ul>
<li>用<code>static</code>修饰<code>ticketNum</code>，使其唯一；</li>
<li>并设置<code>volatile</code>，保证变量在多个线程之间的可见性。</li>
</ul>
</blockquote>
<pre><code class="java">package com.Jungle;

/*
* 遇到问题：
* 1. 如何解决用户同时抢一张票的问题？
* */
public class myThread implements Runnable &#123;

    // 有多少张火车票
    private volatile static int ticketNum = 10;

    @Override
    public void run() &#123;
        while (true) &#123;
            if (ticketNum &lt;= 0) return;
            try &#123;
                Thread.sleep(1);
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;
            System.out.println(Thread.currentThread() +
                    &quot; 拿到了第&quot; + ticketNum-- + &quot;张票!&quot;);
        &#125;
    &#125;

    public static void main(String[] args) &#123;
        myThread t1 = new myThread();
        myThread t2 = new myThread();
        myThread t3 = new myThread();

        new Thread(t1, &quot;小明&quot;).start();
        new Thread(t2, &quot;老师&quot;).start();
        new Thread(t3, &quot;黄牛党&quot;).start();
    &#125;

&#125;
</code></pre>
<blockquote>
<p>失败了！</p>
</blockquote>
<pre><code class="java">// 输出
Thread[小明,5,main] 拿到了第10张票!
Thread[老师,5,main] 拿到了第8张票!
Thread[黄牛党,5,main] 拿到了第9张票!
Thread[黄牛党,5,main] 拿到了第7张票!
Thread[小明,5,main] 拿到了第5张票!
Thread[老师,5,main] 拿到了第6张票!
Thread[黄牛党,5,main] 拿到了第4张票!
Thread[老师,5,main] 拿到了第2张票!
Thread[小明,5,main] 拿到了第3张票!
Thread[黄牛党,5,main] 拿到了第1张票!
Thread[小明,5,main] 拿到了第-1张票!
Thread[老师,5,main] 拿到了第0张票!

Process finished with exit code 0
</code></pre>
<hr>
<h3 id="2-使用外部停止方式"><a href="#2-使用外部停止方式" class="headerlink" title="2. 使用外部停止方式"></a>2. 使用外部停止方式</h3><blockquote>
<p>思想：<code>flag == false </code>时停止!</p>
</blockquote>
<pre><code class="java">// 改名 myThread --&gt; BuyTicket, 放在新建的UnsafeBuyTicket类里

package com.Jungle;

public class UnsafeBuyTicket &#123;
    public static void main(String[] args) &#123;
        //在同一个车站窗口买票
        BuyTicket station = new BuyTicket();

        new Thread(station, &quot;小明&quot;).start();
        new Thread(station, &quot;老师&quot;).start();
        new Thread(station, &quot;黄牛党&quot;).start();
    &#125;


&#125;

class BuyTicket implements Runnable &#123;

    // 有多少张火车票
    private volatile static int ticketNum = 10;

    boolean flag = true; // 外部停止方式

    private void buy() throws InterruptedException &#123;
        // 判断是否有票(无票立即结束)
        if (ticketNum &lt;= 0) &#123;
            flag = false;
            return;
        &#125;
        // 模拟延时
        Thread.sleep(100);
        // 买票
        System.out.println(Thread.currentThread() + &quot; 拿到了第&quot; + ticketNum-- + &quot;张票!&quot;);
    &#125;

    // 买票
    @Override
    public void run() &#123;
        // 买票
        while (flag) &#123;
            try &#123;
                buy();
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
    &#125;
&#125;
</code></pre>
<blockquote>
<p>输出: 出现负数线程不安全!</p>
</blockquote>
<pre><code class="java">Thread[老师,5,main] 拿到了第10张票!
Thread[小明,5,main] 拿到了第9张票!
Thread[黄牛党,5,main] 拿到了第8张票!
Thread[小明,5,main] 拿到了第7张票!
Thread[老师,5,main] 拿到了第6张票!
Thread[黄牛党,5,main] 拿到了第5张票!
Thread[小明,5,main] 拿到了第4张票!
Thread[老师,5,main] 拿到了第3张票!
Thread[黄牛党,5,main] 拿到了第2张票!
Thread[小明,5,main] 拿到了第1张票!
Thread[老师,5,main] 拿到了第-1张票!
Thread[黄牛党,5,main] 拿到了第0张票!

Process finished with exit code 0
</code></pre>
<blockquote>
<p>为什么出现会出现负数?</p>
<p><strong>每个线程在自己的工作内存交互,内存控制不当会造成数据不一致.</strong></p>
<p>同时看到最后一张票, 判断通过(此时票数为1), 其中一人取票后变为负数, 其余人输出负数. </p>
<p>线程不安全的集合: </p>
<ul>
<li>ArrayList</li>
<li>LinkedList</li>
<li>HashMap</li>
</ul>
</blockquote>
<h3 id="3-怎么解决线程不安全"><a href="#3-怎么解决线程不安全" class="headerlink" title="3. 怎么解决线程不安全?"></a>3. 怎么解决线程不安全?</h3><blockquote>
<p>synchronize: 底层原理是同步+锁</p>
<p>案例分析:</p>
<ul>
<li>对于火车票抢票, 多个人在同一个窗口进行, 可以直接在buy()方法里加<code>synchronized</code>关键字, 会对本类对象(<code>BuyTicket station = new BuyTicket();</code>)进行锁定和排队.</li>
<li>银行家案例, 见下分析</li>
</ul>
</blockquote>
<img src="/2021/08/10/Java-JUC/image-20210811134408426.png" alt="image-20210811134408426" style="zoom:67%;">

<pre><code class="java">package com.Jungle;

public class UnsafeBuyTicket &#123;
    public static void main(String[] args) &#123;
        //在同一个车站窗口买票
        BuyTicket station = new BuyTicket();

        new Thread(station, &quot;小明&quot;).start();
        new Thread(station, &quot;老师&quot;).start();
        new Thread(station, &quot;黄牛党&quot;).start();
    &#125;


&#125;

class BuyTicket implements Runnable &#123;

    // 有多少张火车票
    private volatile static int ticketNum = 10;

    boolean flag = true; // 外部停止方式

    // 同步方法
    private synchronized void buy() throws InterruptedException &#123;
        // 判断是否有票(无票立即结束)
        if (ticketNum &lt;= 0) &#123;
            flag = false;
            return;
        &#125;
        // 模拟延时
        Thread.sleep(100);
        // 买票
        System.out.println(Thread.currentThread() + &quot; 拿到了第&quot; + ticketNum-- + &quot;张票!&quot;);
    &#125;

    // 买票
    @Override
    public void run() &#123;
        // 买票
        while (flag) &#123;
            try &#123;
                buy();
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
    &#125;
&#125;
</code></pre>
<p>输出:</p>
<pre><code class="java">Thread[小明,5,main] 拿到了第10张票!
Thread[小明,5,main] 拿到了第9张票!
Thread[黄牛党,5,main] 拿到了第8张票!
Thread[老师,5,main] 拿到了第7张票!
Thread[老师,5,main] 拿到了第6张票!
Thread[黄牛党,5,main] 拿到了第5张票!
Thread[黄牛党,5,main] 拿到了第4张票!
Thread[黄牛党,5,main] 拿到了第3张票!
Thread[黄牛党,5,main] 拿到了第2张票!
Thread[小明,5,main] 拿到了第1张票!

Process finished with exit code 0
</code></pre>
<blockquote>
<p>若不是本类对象的同步,则需要使用共享资源作为同步监视器</p>
<p>案例分析:</p>
<ul>
<li>对于双方对同一账户取钱来说, 启动线程的是双方, 共两个线程, 共享资源是银行账户, 所以需要用到同步代码块, 即锁定银行账户.</li>
</ul>
</blockquote>
<p><img src="/2021/08/10/Java-JUC/image-20210811134936435.png" alt="image-20210811134936435"></p>
<pre><code class="java">package com.Jungle;

import java.nio.charset.StandardCharsets;

public class UnsafeBank &#123;
    public static void main(String[] args) &#123;
        Account account = new Account(100, &quot;结婚基金&quot;);

        UserDrawing you = new UserDrawing(account, 50, &quot;你&quot;);
        UserDrawing yourGF = new UserDrawing(account, 100, &quot;你的女朋友&quot;);

        you.start();
        yourGF.start();
    &#125;
&#125;

// 银行账户
class Account &#123;
    int balance; // 余额
    String cardName; // 卡名
    public Account(int balance, String cardName) &#123;
        this.balance = balance;
        this.cardName = cardName;
    &#125;
&#125;

// 用户取钱
class UserDrawing extends Thread &#123;
    Account account; // 账户
    int drawingCount; // 取多少钱(单位:万)
    int cash; // 取钱后的手里的钱

    public UserDrawing(Account account, int drawingCount, String userName) &#123;
        super(userName);
        this.account = account;
        this.drawingCount = drawingCount;
    &#125;

    // 取钱
    @Override
    public void run() &#123;
        // 锁账户
        synchronized (account) &#123;
            if (account.balance &lt; drawingCount) &#123;
                System.out.println(account.cardName + &quot;余额不足!&quot;);
                return;
            &#125;
            try &#123;
                Thread.sleep(1000);
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;
            account.balance -= drawingCount; // 账户里的钱减少
            cash += drawingCount; // 手里的钱增多

            System.out.println(new StringBuilder().
                    append(account.cardName).append(&quot;余额为: &quot;).append(account.balance));
            System.out.println(new StringBuilder().
                    append(this.getName()).append(&quot;手里的钱: &quot;).append(cash));
        &#125;
    &#125;
&#125;
</code></pre>
<blockquote>
<p>输出: </p>
</blockquote>
<pre><code class="java">结婚基金余额为: 50
你手里的钱: 50
结婚基金余额不足!

Process finished with exit code 0
</code></pre>
<blockquote>
<p>案例3: 不安全的集合</p>
</blockquote>
<pre><code class="java">package com.Jungle;

import java.util.ArrayList;
import java.util.List;

// 线程不安全的集合
public class UnsafeList &#123;

    public static void main(String[] args) &#123;
        List&lt;String&gt; list = new ArrayList&lt;String&gt;();

        for (int i = 0; i &lt; 10000; i++) &#123;
            new Thread(()-&gt;&#123;
                synchronized (list) &#123;
                    list.add(Thread.currentThread().getName());
                &#125;
            &#125;).start();
        &#125;

        try &#123;
            Thread.sleep(1000);
        &#125; catch (InterruptedException e) &#123;
            e.printStackTrace();
        &#125;

        System.out.println(list.size());
    &#125;
&#125;
</code></pre>
<blockquote>
<p>输出:</p>
</blockquote>
<pre><code class="Java">10000

Process finished with exit code 0
</code></pre>
<hr>
<h2 id="CopyOnWriteArrayList"><a href="#CopyOnWriteArrayList" class="headerlink" title="CopyOnWriteArrayList"></a><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/43993780">CopyOnWriteArrayList</a></h2><blockquote>
<p>Copy On Write 也是一种重要的思想，在<strong>写少读多</strong>的场景下，为了保证集合的线程安全性，我们完全可以在当前线程中得到原始数据的一份拷贝，然后进行操作。JDK集合框架中为我们提供了 ArrayList 的这样一个实现：CopyOnWriteArrayList。但是如果不是写少读多的场景，使用 CopyOnWriteArrayList 开销比较大，因为每次对其更新操作（add/set/remove）都会做一次数组拷贝。</p>
</blockquote>
<pre><code class="java">package com.Jungle;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.CopyOnWriteArrayList;

public class JUCTest &#123;
    public static void main(String[] args) &#123;
        List&lt;String&gt; list = new CopyOnWriteArrayList&lt;String&gt;();

        for (int i = 0; i &lt; 10000; i++) &#123;
            new Thread(()-&gt;&#123;
                list.add(Thread.currentThread().getName());
            &#125;).start();
        &#125;

        try &#123;
            Thread.sleep(1000);
        &#125; catch (InterruptedException e) &#123;
            e.printStackTrace();
        &#125;

        System.out.println(list.size());
    &#125;
&#125;
</code></pre>
<blockquote>
<p><strong>涉及到的源码</strong></p>
<p>上文对应的思路应该是: 先复制一份数据, 然后add, 最后再新的数组引用赋值回去.</p>
<p>适合: <strong>写少读多</strong></p>
</blockquote>
<pre><code class="java">public CopyOnWriteArrayList() &#123;
    setArray(new Object[0]);
&#125;
final void setArray(Object[] a) &#123;
    array = a;
&#125;

final transient ReentrantLock lock = new ReentrantLock();

/** The array, accessed only via getArray/setArray. */
private transient volatile Object[] array;

final Object[] getArray() &#123;
    return array;
&#125;

public boolean add(E e) &#123;
    final ReentrantLock lock = this.lock;
    lock.lock();
    try &#123;
        Object[] elements = getArray();
        int len = elements.length;
        Object[] newElements = Arrays.copyOf(elements, len + 1);
        newElements[len] = e;
        setArray(newElements);
        return true;
    &#125; finally &#123;
        lock.unlock();
    &#125;
&#125;

// ReentrantLock:
public void lock() &#123;
    sync.lock();
&#125;

private final Sync sync;

public void unlock() &#123;
    sync.release(1);
&#125;
</code></pre>
<h2 id="Collections-synchronizedList"><a href="#Collections-synchronizedList" class="headerlink" title="Collections.synchronizedList()"></a><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/43993780">Collections.synchronizedList()</a></h2><pre><code class="java">package com.Jungle;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.concurrent.CopyOnWriteArrayList;

public class JUCTest &#123;
    public static void main(String[] args) &#123;
//        List&lt;String&gt; list = new CopyOnWriteArrayList&lt;String&gt;();
        List&lt;String&gt; list = Collections.synchronizedList(new ArrayList&lt;String&gt;());

        for (int i = 0; i &lt; 10000; i++) &#123;
            new Thread(()-&gt;&#123;
                list.add(Thread.currentThread().getName());
            &#125;).start();
        &#125;

        try &#123;
            Thread.sleep(1000);
        &#125; catch (InterruptedException e) &#123;
            e.printStackTrace();
        &#125;

        System.out.println(list.size());
    &#125;
&#125;
</code></pre>
<blockquote>
<p>输出:</p>
</blockquote>
<pre><code class="java">10000

Process finished with exit code 0
</code></pre>
<blockquote>
<p>涉及到的源码</p>
</blockquote>
<pre><code class="java">public static &lt;T&gt; List&lt;T&gt; synchronizedList(List&lt;T&gt; list) &#123;
    return (list instanceof RandomAccess ?
            new SynchronizedRandomAccessList&lt;&gt;(list) :
            new SynchronizedList&lt;&gt;(list));
&#125;

static class SynchronizedRandomAccessList&lt;E&gt;
    extends SynchronizedList&lt;E&gt;
    implements RandomAccess &#123;

    SynchronizedRandomAccessList(List&lt;E&gt; list) &#123;
        super(list);
    &#125;
&#125;

static class SynchronizedList&lt;E&gt;
    extends SynchronizedCollection&lt;E&gt;
    implements List&lt;E&gt; &#123;
    private static final long serialVersionUID = -7754090372962971524L;

    final List&lt;E&gt; list;

    SynchronizedList(List&lt;E&gt; list) &#123;
        super(list);
        this.list = list;
    &#125;
&#125;

static class SynchronizedCollection&lt;E&gt; implements Collection&lt;E&gt;, Serializable &#123;
    private static final long serialVersionUID = 3053995032091335093L;

    final Collection&lt;E&gt; c;  // Backing Collection
    final Object mutex;     // Object on which to synchronize     ---&gt; 加锁的对象            

    SynchronizedCollection(Collection&lt;E&gt; c) &#123;
        this.c = Objects.requireNonNull(c);
        mutex = this;
    &#125;

    SynchronizedCollection(Collection&lt;E&gt; c, Object mutex) &#123;
        this.c = Objects.requireNonNull(c);
        this.mutex = Objects.requireNonNull(mutex);
    &#125;

    public boolean add(E e) &#123;
        synchronized (mutex) &#123;return c.add(e);&#125;
    &#125;
    
    public boolean remove(Object o) &#123;
        synchronized (mutex) &#123;return c.remove(o);&#125;
    &#125;
&#125;
</code></pre>
<h2 id="ThreadPoolExecutor"><a href="#ThreadPoolExecutor" class="headerlink" title="ThreadPoolExecutor"></a><a target="_blank" rel="noopener" href="https://snailclimb.gitee.io/javaguide/#/docs/java/multi-thread/2020%E6%9C%80%E6%96%B0Java%E5%B9%B6%E5%8F%91%E8%BF%9B%E9%98%B6%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93?id=_45-threadpoolexecutor-%e7%b1%bb%e5%88%86%e6%9e%90">ThreadPoolExecutor</a></h2><blockquote>
<p>最终采用线程池方式实现!</p>
<p><strong>使用阿里巴巴推荐的创建线程池的方式</strong></p>
</blockquote>
<pre><code class="java">package com.Jungle;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.CopyOnWriteArrayList;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

public class JUCTest &#123;

    private static final int CORE_POOL_SIZE = 5;
    private static final int MAX_POOL_SIZE = 10;
    private static final int QUEUE_CAPACITY = 100;
    private static final Long KEEP_ALIVE_TIME = 1L;

    public static void main(String[] args) &#123;
//        List&lt;String&gt; list = new CopyOnWriteArrayList&lt;String&gt;();
        List&lt;String&gt; list = Collections.synchronizedList(new ArrayList&lt;String&gt;());

        //使用阿里巴巴推荐的创建线程池的方式
        //通过ThreadPoolExecutor构造函数自定义参数创建
        ThreadPoolExecutor executor = new ThreadPoolExecutor(
                CORE_POOL_SIZE,         // 核心线程数为 5
                MAX_POOL_SIZE,          // 最大线程数 10
                KEEP_ALIVE_TIME,        // 大于核心线程数时,核心线程外的线程等待时间: 1L
                TimeUnit.SECONDS,       // 等待时间的单位为 TimeUnit.SECONDS
                new ArrayBlockingQueue&lt;&gt;(QUEUE_CAPACITY),   // workQueue: 任务队列为 ArrayBlockingQueue，并且容量为 100
                new ThreadPoolExecutor.CallerRunsPolicy()); // handler: 饱和策略为 CallerRunsPolicy

        for (int i = 0; i &lt; 10000; i++) &#123;
            Runnable worker = ()-&gt;&#123;
                list.add(Thread.currentThread().getName());
            &#125;;
            //执行Runnable
            executor.execute(worker);
        &#125;
        //终止线程池
        executor.shutdown();
        while (!executor.isTerminated()) &#123;
        &#125;
        System.out.println(&quot;Finished all threads&quot;);
        System.out.println(list.size());
    &#125;
&#125;
</code></pre>
<blockquote>
<p>输出</p>
</blockquote>
<pre><code class="java">Finished all threads
10000

Process finished with exit code 0
</code></pre>
<hr>
<h1 id="生产者和消费者问题"><a href="#生产者和消费者问题" class="headerlink" title="生产者和消费者问题"></a>生产者和消费者问题</h1><h2 id="管程法"><a href="#管程法" class="headerlink" title="管程法"></a>管程法</h2><img src="/2021/08/10/Java-JUC/image-20210811213802345.png" alt="image-20210811213802345" style="zoom:67%;">

<pre><code class="java">package com.Jungle;

public class Producer_Consumer &#123;
    public static void main(String[] args) &#123;
        // 管程法
        Container container = new Container();
        new Thread(new Producer(container)).start();
        new Thread(new Consumer(container)).start();
    &#125;
&#125;

// 管程法
// 产品 --- 炸鸡
class Chicken &#123;
    int id;
    public Chicken(int id) &#123;
        this.id = id;
    &#125;
&#125;

// 缓冲区
class Container &#123;

    Chicken[] chickens = new Chicken[10];
    int count = 0;

    // 生产者---放入产品
    public synchronized  void push(Chicken chicken) &#123;
        // 如果容器满了, 就需要生产者等待消费者消费
        if (count == chickens.length) &#123;
            try &#123;
                this.wait(); // 生产者等待
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
        // 如果没有满, 就需要丢入产品
        chickens[count++] = chicken;

        // 生产了炸鸡就可以通知消费者消费了
        this.notifyAll();
    &#125;

    // 消费者---拿走产品
    public synchronized Chicken pop() &#123;
        // 判断能否消费
        if (count == 0) &#123;
            try &#123;
                this.wait(); // 消费者等待
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

        // 如果可以消费
        Chicken chicken = chickens[--count];

        // 吃了炸鸡, 就通知生产者生产
        this.notifyAll();

        return chicken;
    &#125;

&#125;

// 生产者
class Producer implements Runnable &#123;

    Container container;

    public Producer(Container container) &#123;
        this.container = container;
    &#125;

    // 生产
    @Override
    public void run() &#123;
        for (int i = 1; i &lt;= 100; i++) &#123;
            container.push(new Chicken(i));
            System.out.println(&quot;生产第&quot; + i + &quot;只炸鸡&quot;);
        &#125;
    &#125;
&#125;

// 消费者
class Consumer implements Runnable &#123;

    Container container;

    public Consumer(Container container) &#123;
        this.container = container;
    &#125;

    // 消费
    @Override
    public void run() &#123;
        for (int i = 1; i &lt;= 100; i++) &#123;
            System.out.println(&quot;消费了第&quot; + container.pop().id + &quot;只炸鸡&quot;);
        &#125;
    &#125;
&#125;
</code></pre>
<blockquote>
<p><strong>输出:</strong></p>
<p>个人理解: </p>
<p>生产者开始生产炸鸡,  初始 <code>count == 0</code> , 所以<code>生产者生产, 消费者等待</code>; </p>
<ul>
<li>当容器内有炸鸡时, 此时 <code>count != 0</code> , 通知 <code>消费者消费</code></li>
<li>当容器已满时, 此时 <code>count == chickens.length</code> , <code>消费者消费, 生产者等待</code></li>
<li>若消费者吃完了炸鸡, 此时 <code>count == 0</code> , 所以 <code>消费者等待, 生产者生产</code></li>
</ul>
<p>由于是并发执行, 针对<code>container</code>同步, 所以生产和消费不一定是交替执行!</p>
</blockquote>
<pre><code class="java">生产第1只炸鸡
生产第2只炸鸡
生产第3只炸鸡
生产第4只炸鸡
生产第5只炸鸡
生产第6只炸鸡
生产第7只炸鸡
生产第8只炸鸡
生产第9只炸鸡
生产第10只炸鸡
生产第11只炸鸡
消费了第10只炸鸡
生产第12只炸鸡
消费了第11只炸鸡
生产第13只炸鸡
消费了第12只炸鸡
生产第14只炸鸡
消费了第13只炸鸡
生产第15只炸鸡
消费了第14只炸鸡
生产第16只炸鸡
消费了第15只炸鸡
消费了第16只炸鸡
消费了第17只炸鸡
生产第17只炸鸡
消费了第9只炸鸡
生产第18只炸鸡
消费了第18只炸鸡
生产第19只炸鸡
消费了第19只炸鸡
消费了第20只炸鸡
消费了第8只炸鸡
消费了第7只炸鸡
消费了第6只炸鸡
消费了第5只炸鸡
生产第20只炸鸡
消费了第4只炸鸡
生产第21只炸鸡
消费了第21只炸鸡
生产第22只炸鸡
生产第23只炸鸡
生产第24只炸鸡
消费了第22只炸鸡
消费了第25只炸鸡
生产第25只炸鸡
消费了第24只炸鸡
消费了第26只炸鸡
消费了第23只炸鸡
消费了第3只炸鸡
消费了第2只炸鸡
消费了第1只炸鸡
生产第26只炸鸡
生产第27只炸鸡
生产第28只炸鸡
生产第29只炸鸡
生产第30只炸鸡
生产第31只炸鸡
生产第32只炸鸡
生产第33只炸鸡
生产第34只炸鸡
生产第35只炸鸡
生产第36只炸鸡
生产第37只炸鸡
消费了第27只炸鸡
消费了第37只炸鸡
生产第38只炸鸡
消费了第38只炸鸡
生产第39只炸鸡
消费了第39只炸鸡
生产第40只炸鸡
消费了第40只炸鸡
生产第41只炸鸡
消费了第41只炸鸡
消费了第42只炸鸡
消费了第36只炸鸡
消费了第35只炸鸡
消费了第34只炸鸡
消费了第33只炸鸡
消费了第32只炸鸡
消费了第31只炸鸡
消费了第30只炸鸡
消费了第29只炸鸡
消费了第28只炸鸡
生产第42只炸鸡
生产第43只炸鸡
生产第44只炸鸡
生产第45只炸鸡
生产第46只炸鸡
生产第47只炸鸡
生产第48只炸鸡
生产第49只炸鸡
生产第50只炸鸡
生产第51只炸鸡
生产第52只炸鸡
生产第53只炸鸡
消费了第43只炸鸡
消费了第53只炸鸡
消费了第52只炸鸡
消费了第51只炸鸡
消费了第50只炸鸡
消费了第49只炸鸡
消费了第48只炸鸡
消费了第47只炸鸡
消费了第46只炸鸡
消费了第45只炸鸡
消费了第44只炸鸡
生产第54只炸鸡
生产第55只炸鸡
生产第56只炸鸡
生产第57只炸鸡
生产第58只炸鸡
生产第59只炸鸡
生产第60只炸鸡
生产第61只炸鸡
生产第62只炸鸡
生产第63只炸鸡
消费了第63只炸鸡
消费了第62只炸鸡
生产第64只炸鸡
消费了第64只炸鸡
生产第65只炸鸡
消费了第65只炸鸡
消费了第66只炸鸡
消费了第61只炸鸡
消费了第60只炸鸡
消费了第59只炸鸡
消费了第58只炸鸡
消费了第57只炸鸡
消费了第56只炸鸡
消费了第55只炸鸡
消费了第54只炸鸡
生产第66只炸鸡
生产第67只炸鸡
生产第68只炸鸡
生产第69只炸鸡
生产第70只炸鸡
生产第71只炸鸡
生产第72只炸鸡
生产第73只炸鸡
生产第74只炸鸡
生产第75只炸鸡
生产第76只炸鸡
消费了第76只炸鸡
消费了第75只炸鸡
消费了第77只炸鸡
消费了第74只炸鸡
消费了第73只炸鸡
消费了第72只炸鸡
生产第77只炸鸡
消费了第71只炸鸡
生产第78只炸鸡
消费了第78只炸鸡
生产第79只炸鸡
生产第80只炸鸡
生产第81只炸鸡
生产第82只炸鸡
生产第83只炸鸡
生产第84只炸鸡
生产第85只炸鸡
消费了第79只炸鸡
消费了第85只炸鸡
消费了第86只炸鸡
消费了第84只炸鸡
消费了第83只炸鸡
消费了第82只炸鸡
消费了第81只炸鸡
消费了第80只炸鸡
消费了第70只炸鸡
消费了第69只炸鸡
生产第86只炸鸡
消费了第68只炸鸡
消费了第87只炸鸡
消费了第67只炸鸡
生产第87只炸鸡
生产第88只炸鸡
生产第89只炸鸡
消费了第89只炸鸡
消费了第90只炸鸡
生产第90只炸鸡
生产第91只炸鸡
生产第92只炸鸡
消费了第88只炸鸡
生产第93只炸鸡
消费了第93只炸鸡
生产第94只炸鸡
生产第95只炸鸡
生产第96只炸鸡
生产第97只炸鸡
生产第98只炸鸡
生产第99只炸鸡
生产第100只炸鸡
消费了第94只炸鸡
消费了第100只炸鸡
消费了第99只炸鸡
消费了第98只炸鸡
消费了第97只炸鸡
消费了第96只炸鸡
消费了第95只炸鸡
消费了第92只炸鸡
消费了第91只炸鸡

Process finished with exit code 0
</code></pre>
<h2 id="信号灯法"><a href="#信号灯法" class="headerlink" title="信号灯法"></a>信号灯法</h2><img src="/2021/08/10/Java-JUC/image-20210811214008128.png" alt="image-20210811214008128" style="zoom:67%;">

<pre><code class="java">package com.Jungle;

public class Producer_Consumer &#123;
    public static void main(String[] args) &#123;
        // 信号灯法
        TV_Program tv_program = new TV_Program();
        new Player(tv_program).start();
        new Audience(tv_program).start();
    &#125;
&#125;

// 信号灯法
// 产品 --- 节目 (综艺节目: 演员先录制节目, 放到电视台; 电视台再播放给观众看; 电视台一次只播放一个节目)
class TV_Program &#123;
    // 演员表演, 观众等待
    // 观众观看, 演员等待
    String voice; // 表演的节目
    boolean flag = true; // 标志, 默认 true

    // 演员表演节目
    public synchronized void play(String voice) &#123;
        // 观众观看时, 演员等待
        if (!flag) &#123;
            try &#123;
                this.wait(); // 演员等待
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
        System.out.println(&quot;演员表演了:&quot; + voice);
        // 表演后通知观众观看
        this.notifyAll(); // 通知唤醒
        this.voice = voice;
        this.flag = !this.flag;
    &#125;

    // 观众观看节目
    public synchronized void watch() &#123;
        // 演员表演时, 观众等待
        if (flag) &#123;
            try &#123;
                this.wait(); // 观众等待
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
        System.out.println(&quot;观众观看了:&quot; + voice);
        // 观看后通知演员表演
        this.notifyAll();
        this.flag = !this.flag;
    &#125;
&#125;

// 生产者 --- 演员
class Player extends Thread &#123;
    TV_Program tv_program;
    public Player(TV_Program tv_program) &#123;
        this.tv_program = tv_program;
    &#125;

    @Override
    public void run() &#123;
        for (int i = 0; i &lt; 20; i++) &#123;
            if (i % 2 == 0) &#123;
                this.tv_program.play(&quot;快乐大本营播放中...&quot;);
            &#125; else &#123;
                this.tv_program.play(&quot;抖音: 记录美好生活!&quot;);
            &#125;
        &#125;
    &#125;
&#125;

// 消费者 --- 观众
class Audience extends Thread &#123;
    TV_Program tv_program;
    public Audience(TV_Program tv_program) &#123;
        this.tv_program = tv_program;
    &#125;

    @Override
    public void run() &#123;
        for (int i = 0; i &lt; 20; i++) &#123;
            tv_program.watch();
        &#125;
    &#125;
&#125;
</code></pre>
<blockquote>
<p><strong>输出:</strong></p>
<p>个人理解;</p>
<p>电视台的节目不是实时的, 需要演员事先将节目录制好, 且电视台在一个时间段只能放一个节目.</p>
<p>当演员 <code>表演节目</code> 时,  flag 初始值为 true, 此时, <code>观众等待</code></p>
<ul>
<li>当表演完一个节目时, flag 通过 <code>this.flag = !this.flag</code> 语句取反为 false, 此时, <code>演员等待</code>, 通知观众观看节目</li>
<li>当观众观看完节目后,  flag 通过 <code>this.flag = !this.flag</code> 语句取反为 true, 此时, <code>观众等待</code>, 通知演员表演节目</li>
</ul>
<p>由于是对<code>tv_program</code>同步, 且利用标志位进行等待与唤醒(相当于上面的容器大小为1), 所以线程交替执行.</p>
</blockquote>
<pre><code class="java">演员表演了:快乐大本营播放中...
观众观看了:快乐大本营播放中...
演员表演了:抖音: 记录美好生活!
观众观看了:抖音: 记录美好生活!
演员表演了:快乐大本营播放中...
观众观看了:快乐大本营播放中...
演员表演了:抖音: 记录美好生活!
观众观看了:抖音: 记录美好生活!
演员表演了:快乐大本营播放中...
观众观看了:快乐大本营播放中...
演员表演了:抖音: 记录美好生活!
观众观看了:抖音: 记录美好生活!
演员表演了:快乐大本营播放中...
观众观看了:快乐大本营播放中...
演员表演了:抖音: 记录美好生活!
观众观看了:抖音: 记录美好生活!
演员表演了:快乐大本营播放中...
观众观看了:快乐大本营播放中...
演员表演了:抖音: 记录美好生活!
观众观看了:抖音: 记录美好生活!
演员表演了:快乐大本营播放中...
观众观看了:快乐大本营播放中...
演员表演了:抖音: 记录美好生活!
观众观看了:抖音: 记录美好生活!
演员表演了:快乐大本营播放中...
观众观看了:快乐大本营播放中...
演员表演了:抖音: 记录美好生活!
观众观看了:抖音: 记录美好生活!
演员表演了:快乐大本营播放中...
观众观看了:快乐大本营播放中...
演员表演了:抖音: 记录美好生活!
观众观看了:抖音: 记录美好生活!
演员表演了:快乐大本营播放中...
观众观看了:快乐大本营播放中...
演员表演了:抖音: 记录美好生活!
观众观看了:抖音: 记录美好生活!
演员表演了:快乐大本营播放中...
观众观看了:快乐大本营播放中...
演员表演了:抖音: 记录美好生活!
观众观看了:抖音: 记录美好生活!

Process finished with exit code 0
</code></pre>
<h2 id="虚假唤醒"><a href="#虚假唤醒" class="headerlink" title="虚假唤醒"></a>虚假唤醒</h2><blockquote>
<p>if (count == chickens.length) this.wait();</p>
</blockquote>
<p><strong>注: 当出现多个线程(不止两个)时, 为了防止出现虚假唤醒, 需要将 if 改为 while.</strong> </p>
<h1 id="新的写法—降低耦合度"><a href="#新的写法—降低耦合度" class="headerlink" title="新的写法—降低耦合度"></a>新的写法—降低耦合度</h1><h2 id="回顾"><a href="#回顾" class="headerlink" title="回顾"></a>回顾</h2><p>进程: 程序的一次执行过程 (资源的最小单位)</p>
<p>线程: 一个进程可以开启多个线程 (执行的最小单位)</p>
<p><strong>线程是进程划分成的更小的运行单位。线程和进程最大的不同在于基本上各进程是独立的，而各线程则不一定，因为同一进程中的线程极有可能会相互影响。线程执行开销小，但不利于资源的管理和保护；而进程正相反。</strong></p>
<p>并发: 走走停停 (交替执行)</p>
<p>并行: 边走边看 (同时执行)</p>
<p>并发的本质: 充分利用CPU的资源.</p>
<blockquote>
<p>线程的状态:</p>
<pre><code class="java">public enum State &#123;
    // 新生
    NEW,
    // 运行
    RUNNABLE,
    // 阻塞
    BLOCKED,
    // 等待
    WAITING,
    // 超时等待
    TIMED_WAITING,
    // 终止
    TERMINATED;
&#125;
</code></pre>
</blockquote>
<blockquote>
<p>wait / sleep 区别</p>
<p>相同点: 两者都可以暂停线程的执行。</p>
</blockquote>
<ol>
<li>来自不同的类: wait =&gt; Object / sleep =&gt; Thread.</li>
<li>两者最主要的区别在于：**<code>sleep()</code> 方法没有释放锁，而 <code>wait()</code> 方法释放了锁** 。</li>
<li><code>wait()</code> 通常被用于线程间交互/通信，<code>sleep() </code>通常被用于暂停执行。</li>
<li><code>wait()</code> 方法被调用后，线程不会自动苏醒，需要别的线程调用同一个对象上的 <code>notify() </code>或者 <code>notifyAll()</code> 方法。<code>sleep() </code>方法执行完成后，线程会自动苏醒。或者可以使用 <code>wait(long timeout)</code> 超时后线程会自动苏醒。</li>
<li>使用范围不一样: wait必须在同步代码块中; sleep可以再任何地方.</li>
<li>wait不需要捕获异常, sleep必须要捕获异常.</li>
</ol>
<hr>
<h2 id="synchronized锁"><a href="#synchronized锁" class="headerlink" title="synchronized锁"></a>synchronized锁</h2><pre><code class="java">package demo;

public class test1 &#123;
    public static void main(String[] args) throws InterruptedException &#123;
        // 获取CPU的核数
        System.out.println(Runtime.getRuntime().availableProcessors());
        Ticket1 ticket = new Ticket1();
        new Thread(()-&gt;&#123;
            for (int i = 0; i &lt; 40; i++) &#123;
                ticket.sale();
                try &#123;
                    Thread.sleep(1);
                &#125; catch (InterruptedException e) &#123;
                    e.printStackTrace();
                &#125;
            &#125;
        &#125;, &quot;A&quot;).start();

        new Thread(()-&gt;&#123;
            for (int i = 0; i &lt; 50; i++) &#123;
                ticket.sale();
                try &#123;
                    Thread.sleep(1);
                &#125; catch (InterruptedException e) &#123;
                    e.printStackTrace();
                &#125;
            &#125;
        &#125;, &quot;B&quot;).start();

        new Thread(()-&gt;&#123;
            for (int i = 0; i &lt; 60; i++) &#123;
                ticket.sale();
                try &#123;
                    Thread.sleep(1000);
                &#125; catch (InterruptedException e) &#123;
                    e.printStackTrace();
                &#125;
            &#125;
        &#125;, &quot;C&quot;).start();
    &#125;
&#125;

class Ticket1 &#123;
    private volatile int number = 30;
    // 卖票
    public synchronized void sale() &#123;
        if (number &gt; 0) &#123;
            System.out.println(Thread.currentThread().getName() + &quot;卖了第&quot;
                    + String.valueOf(number--) + &quot;张票, 剩余: &quot; + number + &quot;张票&quot;);
        &#125; else &#123;
            Thread.currentThread().stop();
        &#125;
    &#125;
&#125;
</code></pre>
<h2 id="Lock锁"><a href="#Lock锁" class="headerlink" title="Lock锁"></a><strong>Lock锁</strong></h2><pre><code class="java">package demo;

import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class test2 &#123;
    public static void main(String[] args) throws InterruptedException &#123;
        // 获取CPU的核数
        System.out.println(Runtime.getRuntime().availableProcessors());
        Ticket2 ticket = new Ticket2();
        // 获取CPU的核数
        new Thread(()-&gt;&#123;for (int i = 0; i &lt; 30; i++) ticket.sale();&#125;, &quot;A&quot;).start();
        new Thread(()-&gt;&#123;for (int i = 0; i &lt; 40; i++) ticket.sale();&#125;, &quot;B&quot;).start();
        new Thread(()-&gt;&#123;for (int i = 0; i &lt; 50; i++) ticket.sale();&#125;, &quot;C&quot;).start();
    &#125;
&#125;

class Ticket2 &#123;
    private volatile int number = 30;
    Lock lock = new ReentrantLock();
    // 卖票
    public void sale() &#123;
        lock.lock(); // 加锁
        try &#123;
            if (number &gt; 0) &#123;
                System.out.println(Thread.currentThread().getName() + &quot;卖了第&quot;
                        + String.valueOf(number--) + &quot;张票, 剩余: &quot; + number + &quot;张票&quot;);
            &#125;
        &#125; finally &#123;
            lock.unlock(); // 解锁
        &#125;
    &#125;

&#125;
</code></pre>
<hr>
<h1 id="java-util-ConcurrentModificationException-并发修改异常"><a href="#java-util-ConcurrentModificationException-并发修改异常" class="headerlink" title="java.util.ConcurrentModificationException 并发修改异常"></a>java.util.ConcurrentModificationException 并发修改异常</h1><h2 id="List-修改不安全"><a href="#List-修改不安全" class="headerlink" title="List 修改不安全"></a>List 修改不安全</h2><p><img src="/2021/08/10/Java-JUC/image-20210822102144626.png" alt="image-20210822102144626"></p>
<h2 id="Set-修改不安全"><a href="#Set-修改不安全" class="headerlink" title="Set 修改不安全"></a>Set 修改不安全</h2><p>同上</p>
<p><img src="/2021/08/10/Java-JUC/image-20210822124129112.png" alt="image-20210822124129112"></p>
<h2 id="Map修改不安全"><a href="#Map修改不安全" class="headerlink" title="Map修改不安全"></a>Map修改不安全</h2><p><img src="/2021/08/10/Java-JUC/image-20210822145652855.png" alt="image-20210822145652855"></p>
<p>链接: <a target="_blank" rel="noopener" href="https://www.matools.com/api/java8">https://www.matools.com/api/java8</a></p>
<p>在这个包下: <img src="/2021/08/10/Java-JUC/image-20210822145837077.png" alt="image-20210822145837077"></p>
<p>详细分析:</p>
<ul>
<li>[简单了解](<a target="_blank" rel="noopener" href="https://snailclimb.gitee.io/javaguide/#/docs/java/collection/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98?id=_1510-concurrenthashmap-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E5%BA%95%E5%B1%82%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0">ConcurrentHashMap 线程安全的具体实现方式/底层具体实现</a>)</li>
<li><a target="_blank" rel="noopener" href="https://snailclimb.gitee.io/javaguide/#/docs/java/collection/ConcurrentHashMap%E6%BA%90%E7%A0%81+%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90">ConcurrentHashMap 源码+底层数据结构分析</a></li>
</ul>
<hr>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 jungle8884@163.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>




    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '6763cf342e4c3335d632',
            clientSecret: '91ee1b22f4c8e5eff96b6e0eae5bdda1f6580ebb',
            repo: 'jungle8884.github.io',
            owner: 'jungle8884',
            admin: ['jungle8884'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2016-2020 Jungle
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







<div>
<div id="musicMouseDrag" style="position:fixed; z-index: 9999; bottom: 0; right: 0;">
<div id="musicDragArea" style="position: absolute; top: 0; left: 0; width: 100%;height: 10px;cursor: move; z-index: 10;"></div>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1300287&auto=0&height=66"></iframe>
</div>
<!-- 以下代码是为了支持随时拖动音乐控件的位置，如没有需求，可去掉下面代码 -->
<script>
var $DOC = $(document)
$('#musicMouseDrag').on ('mousedown', function (e) {
// 阻止文本选中
$DOC.bind ("selectstart", function () {
return false;
});
$('#musicDragArea').css ('height', '100%');
var $moveTarget = $('#musicMouseDrag');
$moveTarget.css ('border', '1px dashed grey')
var div_x = e.pageX - $moveTarget.offset ().left;
var div_y = e.pageY - $moveTarget.offset ().top;
$DOC.on ('mousemove', function (e) {
var targetX = e.pageX - div_x;
var targetY = e.pageY - div_y;
targetX = targetX < 0 ? 0 : (targetX + $moveTarget.outerWidth () >= window.innerWidth) ? window.innerWidth - $moveTarget.outerWidth () : targetX;
targetY = targetY < 0 ? 0 : (targetY + $moveTarget.outerHeight () >= window.innerHeight) ? window.innerHeight - $moveTarget.outerHeight () : targetY;
$moveTarget.css ({'left': targetX + 'px', 'top': targetY + 'px', 'bottom': 'inherit', 'right': 'inherit'})
}).on ('mouseup', function () {
$DOC.unbind ("selectstart");
$DOC.off ('mousemove')
$DOC.off ('mouseup')
$moveTarget.css ('border', 'none')
$('#musicDragArea').css ('height', '10px');
})
})
</script>

</html>
