<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>MySQL学习笔记 | blog of Jungle</title>
  <meta name="keywords" content=" SQL , 约束 , 数据库的设计 , 数据库的备份和还原 , 多表查询 , 事务 ">
  <meta name="description" content="MySQL学习笔记 | blog of Jungle">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="个人介绍Jungle  本科毕业于CUIT, 目前在沈阳读研. 喜欢学习新技术 成为一个合格的程序员, 一定要学好三样东西: 数学 情商 财商     最近什么的干活 论文 刷算法题 秋招 规范: 阿里巴巴开发手册 做项目: 项目基本功能已实现, 后续优化中… 加油， 你一定行！！！   联系方式 email: &amp;#x4a;&amp;#117;&amp;#x6e;&amp;#103;&amp;#108;&amp;#101;&amp;#x38;&amp;">
<meta property="og:type" content="website">
<meta property="og:title" content="个人简介">
<meta property="og:url" content="http://example.com/about/index.html">
<meta property="og:site_name" content="blog of Jungle">
<meta property="og:description" content="个人介绍Jungle  本科毕业于CUIT, 目前在沈阳读研. 喜欢学习新技术 成为一个合格的程序员, 一定要学好三样东西: 数学 情商 财商     最近什么的干活 论文 刷算法题 秋招 规范: 阿里巴巴开发手册 做项目: 项目基本功能已实现, 后续优化中… 加油， 你一定行！！！   联系方式 email: &amp;#x4a;&amp;#117;&amp;#x6e;&amp;#103;&amp;#108;&amp;#101;&amp;#x38;&amp;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-11-13T11:42:01.000Z">
<meta property="article:modified_time" content="2021-09-29T14:22:42.308Z">
<meta property="article:author" content="Jungle">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/darcula.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>Jungle</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/jungle8884" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
        <a title="leetcode" href="https://leetcode-cn.com/progress/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-leetcode"></use>
                </svg>
            
        </a>
        
    
        
        <a title="csdn" href="https://blog.csdn.net/jungle8884" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-csdn"></use>
                </svg>
            
        </a>
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=88786971" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active" data-rel="全部文章">全部文章<small>(50)</small></div></li>
    
        
            
            <li><div data-rel="算法"><i class="fold iconfont icon-right"></i>算法<small>(16)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="算法<--->滑动窗口">滑动窗口<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="算法<--->基础">基础<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="算法<--->链表">链表<small>(8)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="算法<--->日期">日期<small>(2)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="算法<--->树">树<small>(2)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="算法<--->双指针">双指针<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="DL"><i class="fold iconfont icon-right"></i>DL<small>(2)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="DL<--->Python">Python<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="工具"><i class="fold iconfont icon-right"></i>工具<small>(7)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="工具<--->git">git<small>(3)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="工具<--->github">github<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="后端"><i class="fold iconfont icon-right"></i>后端<small>(16)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="后端<--->设计模式">设计模式<small>(8)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="后端<--->C#">C#<small>(2)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="后端<--->Java">Java<small>(6)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="数据库"><i class="fold iconfont icon-right"></i>数据库<small>(2)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="数据库<--->MySQL">MySQL<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="数据库<--->Redis">Redis<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="前端">前端<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="运维"><i class="fold iconfont icon-right"></i>运维<small>(3)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="运维<--->Docker">Docker<small>(2)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
            <li><div data-rel="读书"><i class="fold iconfont icon-right"></i>读书<small>(3)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="读书<--->单词">单词<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="读书<--->软件设计师">软件设计师<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="读书<--->英语">英语<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">关于</a><a style="width: 50%"  class="friends">友链</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="50">
<input type="hidden" id="yelog_site_word_count" value="147.2k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
            <li><a target="_blank" href="https://lavender-z.github.io/">橘子</a></li>
            
            <li><a target="_blank" href="https://youngxhui.top/">ISLAND</a></li>
            
            <li><a target="_blank" href="https://www.liuchuo.net/about">柳神</a></li>
            
            <li><a target="_blank" href="https://programmercarl.com/">K神</a></li>
            
            <li><a target="_blank" href="https://labuladong.github.io/algo/">东哥</a></li>
            
            <li><a target="_blank" href="https://blog.csdn.net/qq_37541097?spm=1001.2014.3001.5509">D神</a></li>
            
            <li><a target="_blank" href="https://blog.csdn.net/qq_33369905?spm=1001.2014.3001.5509">狂神</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>160</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>19</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>203</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>21</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>23</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>234</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>25</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>92</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>博客搭建</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>蔡勒公式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>策略模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>查找</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>抽象工厂模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>创建型模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>代理模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>单例模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>递归</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>迭代</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>多表查询</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>多态</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>多线程</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>二叉树</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>分布式数据库系统及原理</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>工厂方法模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>构建型模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>观察者模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>滑动窗口</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>机器学习</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>集合</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>计算机专业英语</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>简单工厂模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>建造者模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>结构型模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>进制转换</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>镜像</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>链表</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>六大原则</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>六级</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>爬虫</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>排序</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>前端</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>前缀树</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>容器</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>闰年</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>深度学习</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>事务</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数据库的备份和还原</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数据库的设计</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>双指针</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>贪心</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>委托与事件</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>写作</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>行为型模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>移除链表元素</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>优先队列</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>原码, 反码, 补码, 移码</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>原型模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>约束</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Ado.net</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ArrayList</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>C#</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>DL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>github</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>http</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JavaScript</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LinkedList</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Linux</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>List</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Map</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NoSQL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>OJ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Python</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Resnet</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Set</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>shadowsocks</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Shell</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SQL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Vector</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a id="top" class="全部文章 读书 单词 "
           href="/2020/11/24/WordofCS/"
           data-tag="机器学习,深度学习,计算机专业英语,分布式数据库系统及原理"
           data-author="" >
            <span class="post-title" title="WordofCS">WordofCS</span>
            <span class="post-date" title="2020-11-24 17:21:02">2020/11/24</span>
        </a>
        
        <a id="top" class="全部文章 读书 英语 "
           href="/2020/09/18/CET-6-Writing/"
           data-tag="六级,写作"
           data-author="" >
            <span class="post-title" title="六级写作">六级写作</span>
            <span class="post-date" title="2020-09-18 10:21:32">2020/09/18</span>
        </a>
        
        <a  class="全部文章 算法 链表 "
           href="/2021/11/19/LinkedList-160-getIntersectionNode/"
           data-tag="160,链表"
           data-author="" >
            <span class="post-title" title="两个链表是否相交">两个链表是否相交</span>
            <span class="post-date" title="2021-11-19 00:00:00">2021/11/19</span>
        </a>
        
        <a  class="全部文章 算法 链表 "
           href="/2021/11/19/LinkedList-19-removeNthFromEnd/"
           data-tag="链表,19"
           data-author="" >
            <span class="post-title" title="单链表的倒数第K个节点">单链表的倒数第K个节点</span>
            <span class="post-date" title="2021-11-19 00:00:00">2021/11/19</span>
        </a>
        
        <a  class="全部文章 算法 链表 "
           href="/2021/11/19/LinkedList-23-mergeKLists/"
           data-tag="链表,23"
           data-author="" >
            <span class="post-title" title="合并K个有序链表">合并K个有序链表</span>
            <span class="post-date" title="2021-11-19 00:00:00">2021/11/19</span>
        </a>
        
        <a  class="全部文章 算法 链表 "
           href="/2021/11/19/LinkedList-234-isPalindrome/"
           data-tag="链表,234"
           data-author="" >
            <span class="post-title" title="回文链表">回文链表</span>
            <span class="post-date" title="2021-11-19 00:00:00">2021/11/19</span>
        </a>
        
        <a  class="全部文章 算法 链表 "
           href="/2021/11/19/LinkedList-25-reverseKGroup/"
           data-tag="链表,25,迭代"
           data-author="" >
            <span class="post-title" title="K个一组反转链表">K个一组反转链表</span>
            <span class="post-date" title="2021-11-19 00:00:00">2021/11/19</span>
        </a>
        
        <a  class="全部文章 算法 链表 "
           href="/2021/11/19/LinkedList-92-reverseBetween/"
           data-tag="链表,92,递归"
           data-author="" >
            <span class="post-title" title="反转链表">反转链表</span>
            <span class="post-date" title="2021-11-19 00:00:00">2021/11/19</span>
        </a>
        
        <a  class="全部文章 算法 链表 "
           href="/2021/11/18/LinkedList-21-mergeTwoLists/"
           data-tag="链表,21"
           data-author="" >
            <span class="post-title" title="合并两个有序链表">合并两个有序链表</span>
            <span class="post-date" title="2021-11-18 00:00:00">2021/11/18</span>
        </a>
        
        <a  class="全部文章 算法 日期 "
           href="/2021/09/16/Calculate-date/"
           data-tag="闰年"
           data-author="" >
            <span class="post-title" title="Calculate_date">Calculate_date</span>
            <span class="post-date" title="2021-09-16 21:05:01">2021/09/16</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/09/15/DesignPatterofStrategy/"
           data-tag="行为型模式,策略模式"
           data-author="" >
            <span class="post-title" title="策略模式">策略模式</span>
            <span class="post-date" title="2021-09-15 20:58:14">2021/09/15</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/09/15/DesignPatternofObserver/"
           data-tag="观察者模式,行为型模式"
           data-author="" >
            <span class="post-title" title="观察者模式">观察者模式</span>
            <span class="post-date" title="2021-09-15 20:41:49">2021/09/15</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/09/15/DesignPatternofProxy/"
           data-tag="代理模式,结构型模式"
           data-author="" >
            <span class="post-title" title="代理模式">代理模式</span>
            <span class="post-date" title="2021-09-15 20:30:32">2021/09/15</span>
        </a>
        
        <a  class="全部文章 算法 "
           href="/2021/09/07/PriorityQueue/"
           data-tag="优先队列,贪心"
           data-author="" >
            <span class="post-title" title="PriorityQueue">PriorityQueue</span>
            <span class="post-date" title="2021-09-07 00:00:00">2021/09/07</span>
        </a>
        
        <a  class="全部文章 算法 链表 "
           href="/2021/09/05/LinkedList-203-removeElements/"
           data-tag="203,移除链表元素"
           data-author="" >
            <span class="post-title" title="移除链表元素">移除链表元素</span>
            <span class="post-date" title="2021-09-05 00:00:00">2021/09/05</span>
        </a>
        
        <a  class="全部文章 算法 基础 "
           href="/2021/08/31/SearchAndSort/"
           data-tag="排序,查找"
           data-author="" >
            <span class="post-title" title="SearchAndSort">SearchAndSort</span>
            <span class="post-date" title="2021-08-31 14:27:08">2021/08/31</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/08/13/HashSet-HashMap-analyse/"
           data-tag="集合,Set,Map"
           data-author="" >
            <span class="post-title" title="HashMap">HashMap</span>
            <span class="post-date" title="2021-08-13 14:59:19">2021/08/13</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/08/13/LinkedList-analyse/"
           data-tag="集合,LinkedList"
           data-author="" >
            <span class="post-title" title="LinkedList-analyse">LinkedList-analyse</span>
            <span class="post-date" title="2021-08-13 13:19:52">2021/08/13</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/08/13/Vector-analyse/"
           data-tag="集合,List,Vector"
           data-author="" >
            <span class="post-title" title="Vector-analyse">Vector-analyse</span>
            <span class="post-date" title="2021-08-13 11:42:21">2021/08/13</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/08/13/Arraylist-analyse/"
           data-tag="集合,List,ArrayList"
           data-author="" >
            <span class="post-title" title="Arraylist_analyse">Arraylist_analyse</span>
            <span class="post-date" title="2021-08-13 08:59:00">2021/08/13</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/08/10/Java-JUC/"
           data-tag="多线程"
           data-author="" >
            <span class="post-title" title="Java_JUC">Java_JUC</span>
            <span class="post-date" title="2021-08-10 20:42:30">2021/08/10</span>
        </a>
        
        <a  class="全部文章 算法 树 "
           href="/2021/07/09/Trie/"
           data-tag="前缀树"
           data-author="" >
            <span class="post-title" title="Trie">Trie</span>
            <span class="post-date" title="2021-07-09 00:00:00">2021/07/09</span>
        </a>
        
        <a  class="全部文章 算法 滑动窗口 "
           href="/2021/07/02/slidingwindow/"
           data-tag="滑动窗口"
           data-author="" >
            <span class="post-title" title="滑动窗口">滑动窗口</span>
            <span class="post-date" title="2021-07-02 00:00:00">2021/07/02</span>
        </a>
        
        <a  class="全部文章 算法 双指针 "
           href="/2021/07/01/doublepointers/"
           data-tag="双指针"
           data-author="" >
            <span class="post-title" title="双指针">双指针</span>
            <span class="post-date" title="2021-07-01 00:00:00">2021/07/01</span>
        </a>
        
        <a  class="全部文章 数据库 Redis "
           href="/2021/06/29/redis-LearningNote/"
           data-tag="NoSQL"
           data-author="" >
            <span class="post-title" title="redis学习笔记">redis学习笔记</span>
            <span class="post-date" title="2021-06-29 00:00:00">2021/06/29</span>
        </a>
        
        <a  class="全部文章 算法 日期 "
           href="/2021/06/27/Zeller/"
           data-tag="蔡勒公式,OJ"
           data-author="" >
            <span class="post-title" title="Week = (Day + 2*Month + 3*(Month+1)/5 + Year + Year/4 - Year/100 + Year/400) % 7">Week = (Day + 2*Month + 3*(Month+1)/5 + Year + Year/4 - Year/100 + Year/400) % 7</span>
            <span class="post-date" title="2021-06-27 00:00:00">2021/06/27</span>
        </a>
        
        <a  class="全部文章 算法 树 "
           href="/2021/06/01/BinaryTree/"
           data-tag="二叉树"
           data-author="" >
            <span class="post-title" title="二叉树">二叉树</span>
            <span class="post-date" title="2021-06-01 00:00:00">2021/06/01</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2021/05/27/linuxLearningNote/"
           data-tag="Linux,Shell"
           data-author="" >
            <span class="post-title" title="Linux 与 Shell">Linux 与 Shell</span>
            <span class="post-date" title="2021-05-27 00:00:00">2021/05/27</span>
        </a>
        
        <a  class="全部文章 DL "
           href="/2021/05/05/Resnet/"
           data-tag="DL,Resnet"
           data-author="" >
            <span class="post-title" title="Resnet">Resnet</span>
            <span class="post-date" title="2021-05-05 00:00:00">2021/05/05</span>
        </a>
        
        <a  class="全部文章 后端 Java "
           href="/2021/04/29/Java-polymorphism/"
           data-tag="多态"
           data-author="" >
            <span class="post-title" title="Java-polymorphism">Java-polymorphism</span>
            <span class="post-date" title="2021-04-29 00:00:00">2021/04/29</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/04/14/DesignPatternofBuilder/"
           data-tag="建造者模式,构建型模式"
           data-author="" >
            <span class="post-title" title="建造者模式">建造者模式</span>
            <span class="post-date" title="2021-04-14 00:00:00">2021/04/14</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/04/10/DesignPatternofSingleton/"
           data-tag="构建型模式,单例模式"
           data-author="" >
            <span class="post-title" title="单例模式">单例模式</span>
            <span class="post-date" title="2021-04-10 00:00:00">2021/04/10</span>
        </a>
        
        <a  class="全部文章 前端 "
           href="/2021/04/09/JavaScript-Note/"
           data-tag="前端,JavaScript"
           data-author="" >
            <span class="post-title" title="JavaScript">JavaScript</span>
            <span class="post-date" title="2021-04-09 14:27:00">2021/04/09</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/04/09/DesignPatternofSixPrinciples/"
           data-tag="六大原则"
           data-author="" >
            <span class="post-title" title="六大设计原则">六大设计原则</span>
            <span class="post-date" title="2021-04-09 00:00:00">2021/04/09</span>
        </a>
        
        <a  class="全部文章 运维 Docker "
           href="/2021/04/09/DockerPractice/"
           data-tag="Docker,DL"
           data-author="" >
            <span class="post-title" title="DockerPractice">DockerPractice</span>
            <span class="post-date" title="2021-04-09 00:00:00">2021/04/09</span>
        </a>
        
        <a  class="全部文章 工具 git "
           href="/2021/04/06/GitLearningNote-2/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="git学习笔记">git学习笔记</span>
            <span class="post-date" title="2021-04-06 00:00:00">2021/04/06</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/04/02/DesignPatternofPrototype/"
           data-tag="构建型模式,原型模式"
           data-author="" >
            <span class="post-title" title="原型模式">原型模式</span>
            <span class="post-date" title="2021-04-02 00:00:00">2021/04/02</span>
        </a>
        
        <a  class="全部文章 后端 设计模式 "
           href="/2021/03/30/DesignPatternofFactory/"
           data-tag="创建型模式,简单工厂模式,工厂方法模式,抽象工厂模式"
           data-author="" >
            <span class="post-title" title="工厂模式">工厂模式</span>
            <span class="post-date" title="2021-03-30 00:00:00">2021/03/30</span>
        </a>
        
        <a  class="全部文章 数据库 MySQL "
           href="/2021/03/23/MySQLearningNote/"
           data-tag="SQL,约束,数据库的设计,数据库的备份和还原,多表查询,事务"
           data-author="" >
            <span class="post-title" title="MySQL学习笔记">MySQL学习笔记</span>
            <span class="post-date" title="2021-03-23 00:00:00">2021/03/23</span>
        </a>
        
        <a  class="全部文章 运维 Docker "
           href="/2021/03/19/DockerLearningNoteBase/"
           data-tag="docker,镜像,容器"
           data-author="" >
            <span class="post-title" title="Docker学习笔记">Docker学习笔记</span>
            <span class="post-date" title="2021-03-19 00:00:00">2021/03/19</span>
        </a>
        
        <a  class="全部文章 后端 C# "
           href="/2020/10/16/Ado-.net/"
           data-tag="C#,Ado.net"
           data-author="" >
            <span class="post-title" title="Ado.net">Ado.net</span>
            <span class="post-date" title="2020-10-16 00:00:00">2020/10/16</span>
        </a>
        
        <a  class="全部文章 工具 github "
           href="/2020/10/12/GitHubSearch/"
           data-tag="github"
           data-author="" >
            <span class="post-title" title="学会在github上搜索项目">学会在github上搜索项目</span>
            <span class="post-date" title="2020-10-12 13:55:57">2020/10/12</span>
        </a>
        
        <a  class="全部文章 后端 C# "
           href="/2020/09/21/Event-publisher-subscriber/"
           data-tag="C#,委托与事件"
           data-author="" >
            <span class="post-title" title="Event_publisher_subscriber">Event_publisher_subscriber</span>
            <span class="post-date" title="2020-09-21 15:17:32">2020/09/21</span>
        </a>
        
        <a  class="全部文章 读书 软件设计师 "
           href="/2019/12/16/SoftwareDesignTest/"
           data-tag="原码, 反码, 补码, 移码,进制转换"
           data-author="" >
            <span class="post-title" title="软件设计师">软件设计师</span>
            <span class="post-date" title="2019-12-16 10:46:08">2019/12/16</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2019/12/03/douban-spider/"
           data-tag="Python,爬虫"
           data-author="" >
            <span class="post-title" title="豆瓣排行榜小爬虫">豆瓣排行榜小爬虫</span>
            <span class="post-date" title="2019-12-03 00:00:00">2019/12/03</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2019/09/30/Crawler/"
           data-tag="爬虫,http"
           data-author="" >
            <span class="post-title" title="什么是网络爬虫">什么是网络爬虫</span>
            <span class="post-date" title="2019-09-30 14:35:05">2019/09/30</span>
        </a>
        
        <a  class="全部文章 DL Python "
           href="/2019/08/31/PythonNote/"
           data-tag="Python"
           data-author="" >
            <span class="post-title" title="Python学习笔记">Python学习笔记</span>
            <span class="post-date" title="2019-08-31 14:28:16">2019/08/31</span>
        </a>
        
        <a  class="全部文章 工具 git "
           href="/2019/08/10/HowToMakeBlog/"
           data-tag="博客搭建"
           data-author="" >
            <span class="post-title" title="搭建hexo博客">搭建hexo博客</span>
            <span class="post-date" title="2019-08-10 00:00:00">2019/08/10</span>
        </a>
        
        <a  class="全部文章 工具 git "
           href="/2019/06/13/GitLearningNote-1/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="git 初试">git 初试</span>
            <span class="post-date" title="2019-06-13 00:00:00">2019/06/13</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2019/06/13/On-the-Internet-Scientifically/"
           data-tag="shadowsocks"
           data-author="" >
            <span class="post-title" title="科学上网">科学上网</span>
            <span class="post-date" title="2019-06-13 00:00:00">2019/06/13</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-MySQLearningNote" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">MySQL学习笔记</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="数据库">数据库</a> > 
            
            <a  data-rel="数据库&lt;---&gt;MySQL">MySQL</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color4">SQL</a>
            
            <a class="color3">约束</a>
            
            <a class="color2">数据库的设计</a>
            
            <a class="color5">数据库的备份和还原</a>
            
            <a class="color5">多表查询</a>
            
            <a class="color3">事务</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2021-09-17 01:19:20'>2021-03-23 00:00</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:18.6k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">数据库的基本概念</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BD%AF%E4%BB%B6"><span class="toc-text">MySQL数据库软件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL"><span class="toc-text">SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E5%AE%9A%E4%B9%89%E5%8F%8A%E5%88%86%E7%B1%BB%EF%BC%88DDL-DML-DQL-DCL%EF%BC%89"><span class="toc-text">SQL定义及分类（DDL, DML, DQL, DCL）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%81%E8%A1%A8"><span class="toc-text">DDL:操作数据库、表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93-CRUD"><span class="toc-text">操作数据库 CRUD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E8%A1%A8-CRUD"><span class="toc-text">操作表 CRUD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQLYog-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%B7%A5%E5%85%B7"><span class="toc-text">SQLYog 客户端图形化工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML%EF%BC%9A%E5%A2%9E%E5%88%A0%E6%94%B9%E8%A1%A8%E4%B8%AD%E6%95%B0%E6%8D%AE"><span class="toc-text">DML：增删改表中数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-text">添加数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-text">修改数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL%EF%BC%9A%E6%9F%A5%E8%AF%A2%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%AE%B0%E5%BD%95"><span class="toc-text">DQL：查询表中的记录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="toc-text">基础查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-text">排序查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-text">聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">分页查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DCL%EF%BC%9A%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7%EF%BC%8C%E6%8E%88%E6%9D%83"><span class="toc-text">DCL：管理用户，授权</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F"><span class="toc-text">约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-text">非空约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-text">唯一约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">主键约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">外键约束</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-text">数据库的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">多表之间的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%9A%84%E8%8C%83%E5%BC%8F"><span class="toc-text">数据库设计的范式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD%E5%92%8C%E8%BF%98%E5%8E%9F"><span class="toc-text">数据库的备份和还原</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-text">多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF"><span class="toc-text">笛卡尔积</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">内连接查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%93%BE%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">外链接查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E7%BB%83%E4%B9%A0%EF%BC%9A"><span class="toc-text">多表查询练习：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">事务的基本介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E5%BE%81%EF%BC%88%E9%87%8D%E7%82%B9%E6%8E%8C%E6%8F%A1%EF%BC%81%EF%BC%89"><span class="toc-text">事务的四大特征（重点掌握！）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%EF%BC%88%E9%9D%A2%E8%AF%95%E9%87%8D%E7%82%B9%EF%BC%81%EF%BC%89"><span class="toc-text">事务的隔离级别（面试重点！）</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="数据库的基本概念"><a href="#数据库的基本概念" class="headerlink" title="数据库的基本概念"></a>数据库的基本概念</h1><pre><code>1. 数据库的英文单词： DataBase 简称 ： DB
2. 什么数据库？
    * 用于存储和管理数据的仓库。

3. 数据库的特点：
    1. 持久化存储数据的。其实数据库就是一个文件系统
    2. 方便存储和管理数据
    3. 使用了统一的方式操作数据库 -- SQL
</code></pre>
<hr>
<h1 id="MySQL数据库软件"><a href="#MySQL数据库软件" class="headerlink" title="MySQL数据库软件"></a>MySQL数据库软件</h1><pre><code>1. 安装
    * 参见《MySQL基础.pdf》
    * 或者网上找教程
2. 卸载
    1. 去mysql的安装目录找到my.ini文件
        * 复制 datadir=&quot;C:/ProgramData/MySQL/MySQL Server 5.5/Data/&quot;
    2. 卸载MySQL
    3. 删除C:/ProgramData目录下的MySQL文件夹（要删除干净！）。
    
3. 配置
    * MySQL服务启动
        1. 手动。
        2. cmd--&gt; services.msc 打开服务的窗口
        3. 使用管理员打开cmd
            * net start mysql : 启动mysql的服务
            * net stop mysql:关闭mysql服务
    * MySQL登录
        1. mysql -uroot -p密码
            - 默认登录本地
            - 输入-p后直接回车，会以密文方式输入密码！
        2. mysql -hip -uroot -p连接目标的密码
            - 远程连接
            - -h表示主机
            - ip表示要连接的主机的ip地址
        3. mysql --host=ip --user=root --password=连接目标的密码
            - 同方式二，不过更详细！
            - --host=ip                     # 主机ip
            - --user=root                # 用户名
            - --password=连接目标的密码    # 密码
    * MySQL退出
        1. exit
        2. quit

    * MySQL目录结构
        1. MySQL安装目录：basedir=&quot;D:\MySQL&quot;
            * 配置文件 my.ini
        2. MySQL数据目录：datadir=&quot;C:/ProgramData/MySQL/MySQL Server 5.5/Data/&quot;
            * 几个概念
                * 数据库：对应 文件夹
                * 表：对应 文件
                * 数据：对应 数据
</code></pre>
<p><strong>结构图：</strong><img src="/2021/03/23/MySQLearningNote/mysql.png" alt="mysql"></p>
<hr>
<h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><h2 id="SQL定义及分类（DDL-DML-DQL-DCL）"><a href="#SQL定义及分类（DDL-DML-DQL-DCL）" class="headerlink" title="SQL定义及分类（DDL, DML, DQL, DCL）"></a>SQL定义及分类（DDL, DML, DQL, DCL）</h2><pre><code>1.什么是SQL？
    Structured Query Language：结构化查询语言
    其实就是定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。
    
2.SQL通用语法
    1. SQL 语句可以单行或多行书写，以分号结尾。
    2. 可使用空格和缩进来增强语句的可读性。
    3. MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。
    4. 3 种注释
        * 单行注释: -- 注释内容 或 # 注释内容(mysql 特有) 
            * -- 要带空格 （常用）
            * # 不带空格
        * 多行注释: /* 注释 */
    
3. SQL分类
    1) DDL(Data Definition Language)数据定义语言
        用来定义数据库对象：数据库，表，列等。关键字：create, drop,alter 等
    2) DML(Data Manipulation Language)数据操作语言
        用来对数据库中表的数据进行增删改。关键字：insert, delete, update 等
    3) DQL(Data Query Language)数据查询语言
        用来查询数据库中表的记录(数据)。关键字：select, where 等
    4) DCL(Data Control Language)数据控制语言(了解)
        用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT， REVOKE 等
</code></pre>
<p><strong>分类图</strong></p>
<p><img src="/2021/03/23/MySQLearningNote/mysql_SQL.png" alt="mysql_SQL"></p>
<h2 id="DDL-操作数据库、表"><a href="#DDL-操作数据库、表" class="headerlink" title="DDL:操作数据库、表"></a>DDL:操作数据库、表</h2><h3 id="操作数据库-CRUD"><a href="#操作数据库-CRUD" class="headerlink" title="操作数据库 CRUD"></a>操作数据库 CRUD</h3><blockquote>
<p>R(Retrieve)：查询<br>    * 查询所有数据库的名称:<br>        * show databases;<br>    * 查询某个数据库的字符集:查询某个数据库的创建语句<br>        * show create database 数据库名称;</p>
</blockquote>
<pre><code class="sql">-- 查询所有数据库的名称:
mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |    -- 描述MySQL的信息，并不是真正的表---视图，不存在对应的物理文件
| mysql              |  -- 核心数据
| performance_schema |  -- 对性能提升做操作的数据库 （以上都不要轻举妄动！）
| test               |  -- 测试数据库，随便玩。
+--------------------+
4 rows in set (0.00 sec)

-- 查询某个数据库的字符集 及查询某个数据库的创建语句
mysql&gt; show create database mysql;
+----------+----------------------------------------------------------------+
| Database | Create Database                                                |
+----------+----------------------------------------------------------------+
| mysql    | CREATE DATABASE `mysql` /*!40100 DEFAULT CHARACTER SET utf8 */ |
+----------+----------------------------------------------------------------+
1 row in set (0.00 sec)
</code></pre>
<blockquote>
<pre><code>C(Create):创建
    * 创建数据库：
        * create database 数据库名称;
    * 创建数据库，判断不存在，再创建：
        * create database if not exists 数据库名称;
    * 创建数据库，并指定字符集
        * create database 数据库名称 character set 字符集名;
</code></pre>
</blockquote>
<pre><code class="sql">-- 创建自己的测试数据库
mysql&gt; create database db1;
Query OK, 1 row affected (0.01 sec)

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| db1                |
| mysql              |
| performance_schema |
| test               |
+--------------------+
5 rows in set (0.01 sec)

mysql&gt; show create database db1;
+----------+--------------------------------------------------------------+
| Database | Create Database                                              |
+----------+--------------------------------------------------------------+
| db1      | CREATE DATABASE `db1` /*!40100 DEFAULT CHARACTER SET utf8 */ |
+----------+--------------------------------------------------------------+
1 row in set (0.01 sec)

-- 创建数据库，判断不存在，再创建
mysql&gt; create database if not exists db1;
Query OK, 1 row affected, 1 warning (0.00 sec)    
-- 之前已经存在db1，则不创建！
mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| db1                |
| mysql              |
| performance_schema |
| test               |
+--------------------+
5 rows in set (0.00 sec)

-- 不存在db2，则创建！
mysql&gt; create database if not exists db2;
Query OK, 1 row affected (0.00 sec)

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| db1                |
| db2                |
| mysql              |
| performance_schema |
| test               |
+--------------------+
6 rows in set (0.01 sec)

-- 创建数据库，并指定字符集：
mysql&gt; create database db3 character set gbk;
Query OK, 1 row affected (0.00 sec)

mysql&gt; show create database db3;
+----------+-------------------------------------------------------------+
| Database | Create Database                                             |
+----------+-------------------------------------------------------------+
| db3      | CREATE DATABASE `db3` /*!40100 DEFAULT CHARACTER SET gbk */ |
+----------+-------------------------------------------------------------+
1 row in set (0.00 sec)
</code></pre>
<blockquote>
<p>U(Update):修改<br>        * 修改数据库的字符集<br>            * alter database 数据库名称 character set 字符集名称;</p>
</blockquote>
<pre><code class="sql">mysql&gt; alter database db3 character set utf8;
Query OK, 1 row affected (0.01 sec)

mysql&gt; show create database db3;
+----------+--------------------------------------------------------------+
| Database | Create Database                                              |
+----------+--------------------------------------------------------------+
| db3      | CREATE DATABASE `db3` /*!40100 DEFAULT CHARACTER SET utf8 */ |
+----------+--------------------------------------------------------------+
1 row in set (0.00 sec)
</code></pre>
<blockquote>
<p>D(Delete):删除<br>        * 删除数据库<br>            * drop database 数据库名称;<br>        * 判断数据库存在，存在再删除<br>            * drop database if exists 数据库名称;</p>
</blockquote>
<pre><code class="sql">-- 删除数据库
mysql&gt; drop database db3;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| db1                |
| db2                |
| mysql              |
| performance_schema |
| test               |
+--------------------+
6 rows in set (0.00 sec)

-- 判断数据库存在，存在再删除
mysql&gt; drop database if exists db2;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| db1                |
| mysql              |
| performance_schema |
| test               |
+--------------------+
5 rows in set (0.00 sec)
</code></pre>
<blockquote>
<p>使用数据库<br>        * 查询当前正在使用的数据库名称<br>            * select database();<br>        * 使用数据库<br>            * use 数据库名称;</p>
</blockquote>
<pre><code class="sql">-- 查询当前正在使用的数据库名称
mysql&gt; select database();
+------------+
| database() |
+------------+
| NULL       |
+------------+
1 row in set (0.00 sec)

-- 使用数据库
mysql&gt; use db1;
Database changed

mysql&gt; select database();
+------------+
| database() |
+------------+
| db1        |
+------------+
1 row in set (0.00 sec)
</code></pre>
<h3 id="操作表-CRUD"><a href="#操作表-CRUD" class="headerlink" title="操作表 CRUD"></a>操作表 CRUD</h3><blockquote>
<p>R(Retrieve)：查询<br>        * 查询某个数据库中所有的表名称<br>      * show tables;</p>
<ul>
<li>查询表结构<ul>
<li>desc 表名;</li>
</ul>
</li>
</ul>
</blockquote>
<pre><code class="sql">-- 查询前，先使用
mysql&gt; use mysql
Database changed
-- 查询某个数据库中所有的表名称
mysql&gt; show tables;
+---------------------------+
| Tables_in_mysql           |
+---------------------------+
| columns_priv              |
| db                        |
| event                     |
| func                      |
| general_log               |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| host                      |
| ndb_binlog_index          |
| plugin                    |
| proc                      |
| procs_priv                |
| proxies_priv              |
| servers                   |
| slow_log                  |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+
24 rows in set (0.00 sec)

-- 查询表结构
mysql&gt; desc host;
+-----------------------+---------------+------+-----+---------+-------+
| Field                 | Type          | Null | Key | Default | Extra |
+-----------------------+---------------+------+-----+---------+-------+
| Host                  | char(60)      | NO   | PRI |         |       |
| Db                    | char(64)      | NO   | PRI |         |       |
| Select_priv           | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Insert_priv           | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Update_priv           | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Delete_priv           | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Create_priv           | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Drop_priv             | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Grant_priv            | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| References_priv       | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Index_priv            | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Alter_priv            | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Create_tmp_table_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Lock_tables_priv      | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Create_view_priv      | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Show_view_priv        | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Create_routine_priv   | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Alter_routine_priv    | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Execute_priv          | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
| Trigger_priv          | enum(&#39;N&#39;,&#39;Y&#39;) | NO   |     | N       |       |
+-----------------------+---------------+------+-----+---------+-------+
20 rows in set (0.01 sec)
</code></pre>
<p><strong>常用数据类型</strong></p>
<blockquote>
<p>整数</p>
<p>取值范围如果加了unsigned，则最大值翻倍，如：tinyint unsigned的取值范围为(0~256)。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">整数类型</th>
<th>数值范围</th>
</tr>
</thead>
<tbody><tr>
<td align="center">tinyint</td>
<td>1个字节 范围(-128~127)</td>
</tr>
<tr>
<td align="center">smallint</td>
<td>2个字节 范围(-32768~32767)</td>
</tr>
<tr>
<td align="center">mediumint</td>
<td>3个字节 范围(-8388608~8388607)</td>
</tr>
<tr>
<td align="center">int</td>
<td>4个字节 范围(-2147483648~2147483647)</td>
</tr>
</tbody></table>
<blockquote>
<p>小数</p>
<p>设一个字段定义为float(6,3)，如果插入一个数123.45678,实际数据库里存的是123.457，但总个数还以实际为准，即6位。</p>
<p>整数部分最大是3位，如果插入数12.123456，存储的是12.1234，如果插入12.12，存储的是12.1200.</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">小数类型</th>
<th align="left">数值范围</th>
</tr>
</thead>
<tbody><tr>
<td align="center">float(m,d)</td>
<td align="left">单精度浮点型  8位精度(4字节)   m总个数，d小数位</td>
</tr>
<tr>
<td align="center">double(m,d)</td>
<td align="left">双精度浮点型  16位精度(8字节)   m总个数，d小数位</td>
</tr>
<tr>
<td align="center">decimal(m,d)</td>
<td align="left">浮点型在数据库中存放的是近似值，而定点类型在数据库中存放的是精确值；参数m&lt;65 是总个数，d&lt;30且 d&lt;m 是小数位。</td>
</tr>
</tbody></table>
<blockquote>
<p>日期</p>
<p>若定义一个字段为timestamp，这个字段里的时间数据会随其他字段修改的时候自动刷新，</p>
<p>所以这个数据类型的字段可以存放这条记录最后被修改的时间。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">日期时间类型</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">date</td>
<td>日期 ‘2008-12-2’                                      即：yyyy-MM-dd</td>
</tr>
<tr>
<td align="center">time</td>
<td>时间 ‘12:25:36’                                         即：HH:mm:ss</td>
</tr>
<tr>
<td align="center">datetime</td>
<td>日期时间 ‘2008-12-2 22:06:44’              即：yyyy-MM-dd  HH:mm:ss</td>
</tr>
<tr>
<td align="center">timestamp</td>
<td>（时间戳）自动存储记录修改时间         即：yyyy-MM-dd  HH:mm:ss</td>
</tr>
</tbody></table>
<blockquote>
<p>字符串</p>
<ul>
<li><p>char和varchar：</p>
<ol>
<li><p>char(n) 若存入字符数小于n，则以空格补于其后，查询之时再将空格去掉。所以char类型存储的字符串末尾不能有空格，varchar不限于此。 </p>
</li>
<li><p>char(n) 固定长度，char(4)不管是存入几个字符，都将占用4个字节，varchar是存入的实际字符数+1个字节（n&lt;=255）或2个字节(n&gt;255)，所以varchar(4),存入3个字符将占用4个字节。 </p>
</li>
<li><p>char类型的字符串检索速度要比varchar类型的快。</p>
</li>
</ol>
</li>
<li><p>varchar和text： </p>
<ol>
<li><p>varchar可指定n，text不能指定，内部存储varchar是存入的实际字符数+1个字节（n&lt;=255）或2个字节(n&gt;255)，text是实际字符数+2个字节。 </p>
</li>
<li><p>text类型不能有默认值。 </p>
</li>
<li><p>varchar可直接创建索引，text创建索引要指定前多少个字符。varchar查询速度快于text,在都创建索引的情况下，text的索引似乎不起作用。</p>
</li>
</ol>
</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th align="center">字符串</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">char(n)</td>
<td>固定长度，最多255个字符</td>
</tr>
<tr>
<td align="center">varchar(n)</td>
<td>可变长度，最多65535个字符</td>
</tr>
<tr>
<td align="center">tinytext</td>
<td>可变长度，最多255个字符</td>
</tr>
<tr>
<td align="center">text</td>
<td>可变长度，最多65535个字符</td>
</tr>
<tr>
<td align="center">mediumtext</td>
<td>可变长度，最多2的24次方-1个字符</td>
</tr>
<tr>
<td align="center">longtext</td>
<td>可变长度，最多2的32次方-1个字符</td>
</tr>
</tbody></table>
<p><strong>数据类型的属性</strong></p>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">NULL</td>
<td>数据列可包含NULL值</td>
</tr>
<tr>
<td align="center">NOT NULL</td>
<td>数据列不允许包含NULL值</td>
</tr>
<tr>
<td align="center">DEFAULT</td>
<td>默认值</td>
</tr>
<tr>
<td align="center">PRIMARY KEY</td>
<td>主键</td>
</tr>
<tr>
<td align="center">AUTO_INCREMENT</td>
<td>自动递增，适用于整数类型</td>
</tr>
<tr>
<td align="center">UNSIGNED</td>
<td>无符号</td>
</tr>
<tr>
<td align="center">CHARACTER SET name</td>
<td>指定一个字符集</td>
</tr>
</tbody></table>
<blockquote>
<ul>
<li>Create 创建表</li>
<li>语法：<pre><code>create table 表名(
         列名1 数据类型1,
         列名2 数据类型2,
         ....
         列名n 数据类型n
     );
</code></pre>
<ul>
<li>注意：最后一列，不需要加逗号（,）</li>
</ul>
</li>
</ul>
<ul>
<li>创建表<br>create table student(<br>  id int,<br>  name varchar(32),<br>  age int ,<br>  score double(4,1),<br>  birthday date,<br>  insert_time timestamp<br> );</li>
<li>复制表：<ul>
<li>create table 表名 like 被复制的表名;    </li>
</ul>
</li>
</ul>
</blockquote>
<p><strong>学生表结构图：</strong></p>
<img src="/2021/03/23/MySQLearningNote/studenttable.png" alt="studenttable" style="zoom: 50%;">

<pre><code class="sql">-- 先建立一个新的测试数据库
mysql&gt; create database db_Test;
Query OK, 1 row affected (0.00 sec)

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| db_test            |
| mysql              |
| performance_schema |
| test               |
+--------------------+
5 rows in set (0.00 sec)

-- 创建学生表
mysql&gt; use db_test;
Database changed

mysql&gt; create table student(
    -&gt;                     id int,
    -&gt;                     name varchar(32),
    -&gt;                     age int ,
    -&gt;                     score double(4,1),
    -&gt;                     birthday date, -- 只需要年月日
    -&gt;                     insert_time timestamp -- 最后一行不要有逗号
    -&gt;                 );
Query OK, 0 rows affected (0.01 sec)

-- 查询刚刚建立的表
mysql&gt; show tables;
+-------------------+
| Tables_in_db_test |
+-------------------+
| student           |
+-------------------+
1 row in set (0.00 sec)
-- 查询表结构
mysql&gt; desc student;
+-------------+-------------+------+-----+-------------------+-----------------------------+
| Field       | Type        | Null | Key | Default           | Extra                       |
+-------------+-------------+------+-----+-------------------+-----------------------------+
| id          | int(11)     | YES  |     | NULL              |                             |
| name        | varchar(32) | YES  |     | NULL              |                             |
| age         | int(11)     | YES  |     | NULL              |                             |
| score       | double(4,1) | YES  |     | NULL              |                             |
| birthday    | date        | YES  |     | NULL              |                             |
| insert_time | timestamp   | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |
+-------------+-------------+------+-----+-------------------+-----------------------------+
6 rows in set (0.01 sec)

-- 复制表
mysql&gt; create table stu like student;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; show tables;
+-------------------+
| Tables_in_db_test |
+-------------------+
| stu               |
| student           |
+-------------------+
2 rows in set (0.00 sec)
</code></pre>
<blockquote>
<p>D(Delete):删除<br>        * drop table 表名;<br>        * drop table  if exists 表名 ;</p>
</blockquote>
<pre><code class="sql">-- 删除前，先复制
mysql&gt; create table stu like student;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; show tables;
+-------------------+
| Tables_in_db_test |
+-------------------+
| stu               |
| student           |
+-------------------+
2 rows in set (0.00 sec)

-- 1. 直接删除
mysql&gt; drop table stu;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; show tables;
+-------------------+
| Tables_in_db_test |
+-------------------+
| student           |
+-------------------+
1 row in set (0.00 sec)

-- 2. 若存在再删除
mysql&gt; drop table if exists stu;
Query OK, 0 rows affected, 1 warning (0.00 sec)
</code></pre>
<blockquote>
<p>Update 修改表</p>
</blockquote>
<blockquote>
<p>修改表名</p>
<p>alter table 表名 rename to 新的表名;</p>
</blockquote>
<pre><code class="sql">mysql&gt; alter table student rename to stu;
Query OK, 0 rows affected (0.03 sec)

mysql&gt; show tables;
+-------------------+
| Tables_in_db_test |
+-------------------+
| stu               |
+-------------------+
1 row in set (0.00 sec)
</code></pre>
<blockquote>
<p>修改表的字符集</p>
<p>alter table 表名 character set 字符集名称;</p>
</blockquote>
<pre><code class="sql">-- 1. 先显示
mysql&gt; show create table stu;
+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                                                                                                                                         |
+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stu   | CREATE TABLE `stu` (
  `id` int(11) DEFAULT NULL,
  `name` varchar(32) DEFAULT NULL,
  `age` int(11) DEFAULT NULL,
  `score` double(4,1) DEFAULT NULL,
  `birthday` date DEFAULT NULL,
  `insert_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

-- 2. 再修改
mysql&gt; alter table stu character set gbk;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; show create table stu;
+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                                                                                                                                                           |
+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stu   | CREATE TABLE `stu` (
  `id` int(11) DEFAULT NULL,
  `name` varchar(32) CHARACTER SET utf8 DEFAULT NULL,
  `age` int(11) DEFAULT NULL,
  `score` double(4,1) DEFAULT NULL,
  `birthday` date DEFAULT NULL,
  `insert_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=gbk |
+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
</code></pre>
<blockquote>
<p>添加一列</p>
<p>alter table 表名 add 列名 数据类型;</p>
</blockquote>
<pre><code class="sql">mysql&gt; alter table stu add gender varchar(10);
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; desc stu;
+-------------+-------------+------+-----+-------------------+-----------------------------+
| Field       | Type        | Null | Key | Default           | Extra                       |
+-------------+-------------+------+-----+-------------------+-----------------------------+
| id          | int(11)     | YES  |     | NULL              |                             |
| name        | varchar(32) | YES  |     | NULL              |                             |
| age         | int(11)     | YES  |     | NULL              |                             |
| score       | double(4,1) | YES  |     | NULL              |                             |
| birthday    | date        | YES  |     | NULL              |                             |
| insert_time | timestamp   | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |
| gender      | varchar(10) | YES  |     | NULL              |                             |
+-------------+-------------+------+-----+-------------------+-----------------------------+
7 rows in set (0.01 sec)
</code></pre>
<blockquote>
<p>修改列名称 类型</p>
<p>alter table 表名 change 列名 新列名 新数据类型;<br>alter table 表名 modify 列名 新数据类型;</p>
</blockquote>
<pre><code class="sql">-- 同时修改列名和类型
mysql&gt; alter table stu change gender sex varchar(20);
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; desc stu;
+-------------+-------------+------+-----+-------------------+-----------------------------+
| Field       | Type        | Null | Key | Default           | Extra                       |
+-------------+-------------+------+-----+-------------------+-----------------------------+
| id          | int(11)     | YES  |     | NULL              |                             |
| name        | varchar(32) | YES  |     | NULL              |                             |
| age         | int(11)     | YES  |     | NULL              |                             |
| score       | double(4,1) | YES  |     | NULL              |                             |
| birthday    | date        | YES  |     | NULL              |                             |
| insert_time | timestamp   | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |
| sex         | varchar(20) | YES  |     | NULL              |                             |
+-------------+-------------+------+-----+-------------------+-----------------------------+
7 rows in set (0.01 sec)

-- 只改类型
mysql&gt; alter table stu modify sex varchar(10);
Query OK, 0 rows affected (0.04 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; desc stu;
+-------------+-------------+------+-----+-------------------+-----------------------------+
| Field       | Type        | Null | Key | Default           | Extra                       |
+-------------+-------------+------+-----+-------------------+-----------------------------+
| id          | int(11)     | YES  |     | NULL              |                             |
| name        | varchar(32) | YES  |     | NULL              |                             |
| age         | int(11)     | YES  |     | NULL              |                             |
| score       | double(4,1) | YES  |     | NULL              |                             |
| birthday    | date        | YES  |     | NULL              |                             |
| insert_time | timestamp   | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |
| sex         | varchar(10) | YES  |     | NULL              |                             |
+-------------+-------------+------+-----+-------------------+-----------------------------+
7 rows in set (0.01 sec)
</code></pre>
<blockquote>
<p>删除列</p>
<p>alter table 表名 drop 列名;</p>
</blockquote>
<pre><code class="sql">mysql&gt; alter table stu drop sex;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; desc stu;
+-------------+-------------+------+-----+-------------------+-----------------------------+
| Field       | Type        | Null | Key | Default           | Extra                       |
+-------------+-------------+------+-----+-------------------+-----------------------------+
| id          | int(11)     | YES  |     | NULL              |                             |
| name        | varchar(32) | YES  |     | NULL              |                             |
| age         | int(11)     | YES  |     | NULL              |                             |
| score       | double(4,1) | YES  |     | NULL              |                             |
| birthday    | date        | YES  |     | NULL              |                             |
| insert_time | timestamp   | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |
+-------------+-------------+------+-----+-------------------+-----------------------------+
6 rows in set (0.01 sec)
</code></pre>
<h3 id="SQLYog-客户端图形化工具"><a href="#SQLYog-客户端图形化工具" class="headerlink" title="SQLYog 客户端图形化工具"></a>SQLYog 客户端图形化工具</h3><blockquote>
<p>注册码：</p>
<p>​    姓名（Name）：cr173</p>
<p>​    序列号（Code）：8d8120df-a5c3-4989-8f47-5afc79c56e7c</p>
<p>​    </p>
<p>​    姓名（Name）：cr173</p>
<p>​    序列号（Code）：59adfdfe-bcb0-4762-8267-d7fccf16beda</p>
<p>​    </p>
<p>​    姓名（Name）：cr173</p>
<p>​    序列号（Code）：ec38d297-0543-4679-b098-4baadf91f983</p>
</blockquote>
<h2 id="DML：增删改表中数据"><a href="#DML：增删改表中数据" class="headerlink" title="DML：增删改表中数据"></a>DML：增删改表中数据</h2><h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><blockquote>
<pre><code>* 语法：
    * insert into 表名(列名1,列名2,...列名n) values(值1,值2,...值n);
* 注意：
    1. 列名和值要一 一对应。
    2. 如果表名后，不定义列名，则默认给所有列添加值
        - insert into 表名 values(值1,值2,...值n);
    3. 除了数字类型，其他类型需要使用引号(单双都可以)引起来
</code></pre>
</blockquote>
<pre><code class="sql">-- 第一种方式（指定列添加值）
insert INto stu(id,name,age) value(1, &#39;Jungle&#39;, 26);
select * from stu;
-- SQLyog数据显示
id    name    age    score    birthday    insert_time
1    Jungle    26    \N    \N    2021-03-23 16:20:42

-- 第二种方式（默认给所有列添加值）
insert INto stu value(2, &#39;James&#39;, 32, 100, null, null);
select * from stu;
-- SQLyog数据显示
id    name    age    score    birthday    insert_time
1    Jungle    26    \N    \N    2021-03-23 16:20:42
2    James    32    100.0    \N    2021-03-23 16:25:25
-- 单双引号都可以
insert INto stu value(3, &#39;Lebro&#39;, 37, 100, &quot;1984-12-30&quot;, null);
select * from stu;
-- SQLyog数据显示
id    name    age    score    birthday    insert_time
1    Jungle    26    \N    \N    2021-03-23 16:20:42
2    James    32    100.0    \N    2021-03-23 16:25:25
3    Lebro    37    100.0    1984-12-30    2021-03-23 16:30:55
</code></pre>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><blockquote>
<ul>
<li>语法：<ul>
<li>delete from 表名 [where 条件]</li>
<li>注意：<ol>
<li>如果不加条件，则删除表中所有记录。</li>
<li>drop 对数据库和表整体完全删除；而delete对表中的记录删除，但结构还在。</li>
<li>如果要删除所有记录</li>
<li>delete from 表名; <ul>
<li>不推荐使用。</li>
<li>有多少条记录就会执行多少次删除操作</li>
</ul>
</li>
<li>TRUNCATE TABLE 表名; <ul>
<li>推荐使用，效率更高 </li>
<li>先删除表，然后再创建一张一模一样的空表。</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
</blockquote>
<pre><code class="sql">-- 删除表中满足条件的记录
DELETE FROM stu WHERE id=1;
SELECT * FROM stu;
-- SQLyog数据显示
id    name    age    score    birthday    insert_time
2    James    32    100.0    \N    2021-03-23 16:25:25
3    Lebro    37    100.0    1984-12-30    2021-03-23 16:30:55

-- 删除所有记录
TRUNCATE TABLE stu;
SELECT * FROM stu;
-- SQLyog数据显示
id    name    age    score    birthday    insert_time
</code></pre>
<h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><blockquote>
<pre><code>* 语法：
    * update 表名 set 列名1 = 值1, 列名2 = 值2,... [where 条件];
* 注意：
    1. 如果不加任何条件，则会将表中所有记录全部修改。
    2. alter 是修改数据库和表的结构，update 时修改表的内容。
</code></pre>
</blockquote>
<pre><code class="sql">-- 先执行插入数据
INSERT INTO stu(id,NAME,age) VALUE(1, &#39;Jungle&#39;, 26);
INSERT INTO stu VALUE(2, &#39;James&#39;, 32, 100, NULL, NULL);
INSERT INTO stu VALUE(3, &#39;Lebro&#39;, 37, 100, &#39;1984-12-30&#39;, NULL);

-- 再修改数据：

-- 1 修改单列数据
update stu set age=37 where id=2;
SELECT * FROM stu;
-- SQLyog数据显示
id    name    age    score    birthday    insert_time
1    Jungle    26    \N    \N    2021-03-23 16:45:29
2    James    37    100.0    \N    2021-03-23 16:47:05
3    Lebro    37    100.0    1984-12-30    2021-03-23 16:45:29

-- 2 修改多列数据
UPDATE stu SET score=100,birthday=&#39;1995-10-01&#39; WHERE id=1;
SELECT * FROM stu;
-- SQLyog数据显示
id    name    age    score    birthday    insert_time
1    Jungle    26    100.0    1995-10-01    2021-03-23 16:50:22
2    James    37    100.0    \N    2021-03-23 16:47:05
3    Lebro    37    100.0    1984-12-30    2021-03-23 16:45:29
</code></pre>
<h2 id="DQL：查询表中的记录"><a href="#DQL：查询表中的记录" class="headerlink" title="DQL：查询表中的记录"></a>DQL：查询表中的记录</h2><blockquote>
<p>语法：</p>
<ul>
<li>select * from 表名;<ul>
<li>select<pre><code>字段列表
</code></pre>
</li>
<li>from<pre><code>表名列表
</code></pre>
</li>
<li>where<pre><code>条件列表
</code></pre>
</li>
<li>group by<pre><code>分组字段
</code></pre>
</li>
<li>having<pre><code>分组之后的条件
</code></pre>
</li>
<li>order by<pre><code>排序
</code></pre>
</li>
<li>limit<pre><code>分页限定
</code></pre>
</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h3><pre><code class="sql">-- 进行查询之前的数据准备：

  CREATE TABLE student (
    id int,
    name varchar(20),
    age int,
    gender varchar(5),
    address varchar(100),
    math int,
    english int
  );

  INSERT INTO student(id,NAME,age,gender,address,math,english)
  VALUES(1,&#39;马云&#39;,55,&#39;男&#39;,&#39;杭州&#39;,66,78),
      (2,&#39;马化腾&#39;,45,&#39;女&#39;,&#39;深圳&#39;,98,87),
      (3,&#39;马景涛&#39;,55,&#39;男&#39;,&#39;香港&#39;,56,77),
      (4,&#39;柳岩&#39;,20,&#39;女&#39;,&#39;湖南&#39;,76,65),
      (5,&#39;柳青&#39;,20,&#39;男&#39;,&#39;湖南&#39;,86,NULL),
      (6,&#39;刘德华&#39;,57,&#39;男&#39;,&#39;香港&#39;,99,99),
      (7,&#39;马德&#39;,22,&#39;女&#39;,&#39;香港&#39;,99,99),
      (8,&#39;德玛西亚&#39;,18,&#39;男&#39;,&#39;南京&#39;,56,65);


select * from student;

  id    name    age    gender    address    math    english
  1    马云    55    男    杭州    66    78
  2    马化腾    45    女    深圳    98    87
  3    马景涛    55    男    香港    56    77
  4    柳岩    20    女    湖南    76    65
  5    柳青    20    男    湖南    86    \N
  6    刘德华    57    男    香港    99    99
  7    马德    22    女    香港    99    99
  8    德玛西亚    18    男    南京    56    65
</code></pre>
<blockquote>
<p>多个字段的查询</p>
<p>select 字段名1，字段名2… from 表名；</p>
<ul>
<li>注意：如果查询所有字段，则可以使用*来替代字段列表。</li>
</ul>
</blockquote>
<pre><code class="sql">-- 查询姓名和年龄

-- 写法一：
SELECT NAME, age FROM student;

-- 写法二（推荐）：
SELECT 
    NAME, -- 姓名
    age   -- 年龄
FROM 
    student; -- 学生表
    
-- SQLyog数据显示
name    age
马云    55
马化腾    45
马景涛    55
柳岩    20
柳青    20
刘德华    57
马德    22
德玛西亚    18
</code></pre>
<blockquote>
<p>去除重复</p>
<p>distinct</p>
<ul>
<li>注意：去重要保证记录之间完全一样！</li>
</ul>
</blockquote>
<pre><code class="sql">-- 去除前：
SELECT address FROM student;

address
杭州
深圳
香港
湖南
湖南
香港
香港
南京

-- 去除后：
SELECT DISTINCT address FROM student;

address
杭州
深圳
香港
湖南
南京

-- 两条记录要完全一致才能去重！
SELECT NAME, address FROM student;
name    address
马云    杭州
马化腾    深圳
马景涛    香港
柳岩    湖南
柳青    湖南
刘德华    香港
马德    香港
德玛西亚    南京

SELECT DISTINCT NAME, address FROM student;
name    address
马云    杭州
马化腾    深圳
马景涛    香港
柳岩    湖南
柳青    湖南
刘德华    香港
马德    香港
德玛西亚    南京
</code></pre>
<blockquote>
<ul>
<li>计算列<ul>
<li>一般可以使用四则运算计算一些列的值。（一般只会进行数值型的计算）</li>
<li>ifnull(表达式1,表达式2)：<ul>
<li>表达式1：判断位于表达式1的字段是否为null；</li>
<li>表达式2：如果表达式1的字段为null，就用位于表达式2的字段值替换。    </li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<pre><code class="sql">-- 计算 math 和 english 分数之和：

-- 先显示带计算的数据：
select name, math, english from student;
name    math    english
马云    66    78
马化腾    98    87
马景涛    56    77
柳岩    76    65
柳青    86    \N
刘德华    99    99
马德    99    99
德玛西亚    56    65

-- 计算分数之和：
SELECT NAME, math, english, math + english FROM student;
-- 发现柳青这条数据出现了问题：如果有null参与的运算，计算结果都为null（null表示没参加某场考试）。
name    math    english    math + english
马云    66    78    144
马化腾    98    87    185
马景涛    56    77    133
柳岩    76    65    141
柳青    86    \N    \N
刘德华    99    99    198
马德    99    99    198
德玛西亚    56    65    121
-- 解决如下：
SELECT NAME, math, english, math + IFNULL(english, 0) FROM student;
name    math    english    math + ifnull(english, 0)
马云    66    78    144
马化腾    98    87    185
马景涛    56    77    133
柳岩    76    65    141
柳青    86    \N    86
刘德华    99    99    198
马德    99    99    198
德玛西亚    56    65    121
</code></pre>
<blockquote>
<p>起别名</p>
<ul>
<li>as：as也可以省略</li>
</ul>
</blockquote>
<pre><code class="sql">-- 方式一：
SELECT NAME, math, english, math + IFNULL(english, 0) AS &#39;总分&#39; FROM student;
name    math    english    总分
马云    66    78    144
马化腾    98    87    185
马景涛    56    77    133
柳岩    76    65    141
柳青    86    \N    86
刘德华    99    99    198
马德    99    99    198
德玛西亚    56    65    121

-- 方式二：省略as
SELECT NAME, math, english, math + IFNULL(english, 0) &#39;总分&#39; FROM student;
name    math    english    总分
马云    66    78    144
马化腾    98    87    185
马景涛    56    77    133
柳岩    76    65    141
柳青    86    \N    86
刘德华    99    99    198
马德    99    99    198
德玛西亚    56    65    121

-- 都起个名字：
SELECT NAME, math &#39;数学&#39;, english &#39;英语&#39;, math + IFNULL(english, 0) &#39;总分&#39; FROM student;
name    数学    英语    总分
马云    66    78    144
马化腾    98    87    185
马景涛    56    77    133
柳岩    76    65    141
柳青    86    \N    86
刘德华    99    99    198
马德    99    99    198
德玛西亚    56    65    121
</code></pre>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><blockquote>
<ul>
<li>where子句后跟条件</li>
<li> 运算符</li>
<li>&lt; 、&lt;= 、&gt;= 、= 、&lt;&gt;</li>
<li>BETWEEN…AND  </li>
<li>IN( 集合) </li>
<li>LIKE：模糊查询<ul>
<li>占位符：</li>
<li>_:单个任意字符</li>
<li>%：多个任意字符</li>
</ul>
</li>
<li>IS NULL  </li>
<li>IS NOT NULL</li>
<li>and  或 &amp;&amp;</li>
<li>or  或 || </li>
<li>not  或 !</li>
</ul>
</blockquote>
<blockquote>
<p>&lt; 、&lt;= 、&gt;= 、&gt;,  = 、&lt;&gt;  或 !=</p>
</blockquote>
<pre><code class="sql">-- 查询年龄大于20岁
SELECT * FROM student WHERE age &gt; 20;
id    name    age    gender    address    math    english
1    马云    55    男    杭州    66    78
2    马化腾    45    女    深圳    98    87
3    马景涛    55    男    香港    56    77
6    刘德华    57    男    香港    99    99
7    马德    22    女    香港    99    99

-- 查询年龄大于等于20岁
SELECT * FROM student WHERE age &gt;= 20;
id    name    age    gender    address    math    english
1    马云    55    男    杭州    66    78
2    马化腾    45    女    深圳    98    87
3    马景涛    55    男    香港    56    77
4    柳岩    20    女    湖南    76    65
5    柳青    20    男    湖南    86    \N
6    刘德华    57    男    香港    99    99
7    马德    22    女    香港    99    99

-- 查询年龄等于20岁
SELECT * FROM student WHERE age = 20; -- sql里面要注意等于就是：‘=’。
id    name    age    gender    address    math    english
4    柳岩    20    女    湖南    76    65
5    柳青    20    男    湖南    86    \N

-- 查询年龄不等于20岁
SELECT * FROM student WHERE age &lt;&gt; 20;
id    name    age    gender    address    math    english
1    马云    55    男    杭州    66    78
2    马化腾    45    女    深圳    98    87
3    马景涛    55    男    香港    56    77
6    刘德华    57    男    香港    99    99
7    马德    22    女    香港    99    99
8    德玛西亚    18    男    南京    56    65
SELECT * FROM student WHERE age != 20;
id    name    age    gender    address    math    english
1    马云    55    男    杭州    66    78
2    马化腾    45    女    深圳    98    87
3    马景涛    55    男    香港    56    77
6    刘德华    57    男    香港    99    99
7    马德    22    女    香港    99    99
8    德玛西亚    18    男    南京    56    65

-- 所有的记录：供上面对比。
SELECT * FROM student;
id    name    age    gender    address    math    english
1    马云    55    男    杭州    66    78
2    马化腾    45    女    深圳    98    87
3    马景涛    55    男    香港    56    77
4    柳岩    20    女    湖南    76    65
5    柳青    20    男    湖南    86    \N
6    刘德华    57    男    香港    99    99
7    马德    22    女    香港    99    99
8    德玛西亚    18    男    南京    56    65
</code></pre>
<blockquote>
<p>BETWEEN…AND</p>
</blockquote>
<pre><code class="sql">-- 查询年龄大于等于20 小于等于30

-- 方式一：（推荐写法！）
SELECT * FROM student WHERE age BETWEEN 20 AND 30;
id    name    age    gender    address    math    english
4    柳岩    20    女    湖南    76    65
5    柳青    20    男    湖南    86    \N
7    马德    22    女    香港    99    99

-- 方式二：
SELECT * FROM student WHERE age &gt;= 20 AND age &lt;= 30;
id    name    age    gender    address    math    english
4    柳岩    20    女    湖南    76    65
5    柳青    20    男    湖南    86    \N
7    马德    22    女    香港    99    99
</code></pre>
<blockquote>
<p>IN( 集合)</p>
</blockquote>
<pre><code class="sql">-- 查询年龄22岁，18岁，25岁的信息

-- 方式一：（推荐写法！）
select * from student where age in(18, 22, 25);
id    name    age    gender    address    math    english
7    马德    22    女    香港    99    99
8    德玛西亚    18    男    南京    56    65

-- 方式二：
SELECT * FROM student WHERE age=22 OR age=18 OR age=25;
id    name    age    gender    address    math    english
7    马德    22    女    香港    99    99
8    德玛西亚    18    男    南京    56    65
</code></pre>
<blockquote>
<p>IS NULL</p>
</blockquote>
<pre><code class="sql">-- 查询英语成绩为null，也就是查询缺考的。

-- 方式一：（null 值的判断不能用 = 或 != 来判断）
SELECT * FROM student WHERE english = NULL; 
    -- 查询出来没有结果！
    -- 说明 null 值的判断不能用 = 或 != 来判断。
id    name    age    gender    address    math    english

-- 方式二：
SELECT * FROM student WHERE english IS NULL;
    -- 可以通过 is null 来判断
id    name    age    gender    address    math    english
5    柳青    20    男    湖南    86    \N
</code></pre>
<blockquote>
<p>IS NOT NULL</p>
</blockquote>
<pre><code class="sql">-- 查询英语成绩不为null，也就是参加考试了的。
SELECT * FROM student WHERE english IS NOT NULL;

id    name    age    gender    address    math    english
1    马云    55    男    杭州    66    78
2    马化腾    45    女    深圳    98    87
3    马景涛    55    男    香港    56    77
4    柳岩    20    女    湖南    76    65
6    刘德华    57    男    香港    99    99
7    马德    22    女    香港    99    99
8    德玛西亚    18    男    南京    56    65
</code></pre>
<blockquote>
<ul>
<li>LIKE：模糊查询<ul>
<li>占位符：<ul>
<li>_ :   单个任意字符</li>
<li>%：多个任意字符</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<pre><code class="sql">-- 查询姓马的有哪些：
    -- 姓 &#39;马&#39;，&#39;马&#39; 肯定在第一个位置。
SELECT * FROM student WHERE NAME LIKE &#39;马%&#39;;
id    name    age    gender    address    math    english
1    马云    55    男    杭州    66    78
2    马化腾    45    女    深圳    98    87
3    马景涛    55    男    香港    56    77
7    马德    22    女    香港    99    99

-- 查询姓名中第二个字时化的人：
SELECT * FROM student WHERE NAME LIKE &#39;_化%&#39;;
id    name    age    gender    address    math    english
2    马化腾    45    女    深圳    98    87

-- 查询姓名是三个字的人：
select * from student where name like &#39;___&#39;;
id    name    age    gender    address    math    english
2    马化腾    45    女    深圳    98    87
3    马景涛    55    男    香港    56    77
6    刘德华    57    男    香港    99    99

-- 查询姓名中包含&#39;马&#39;字的人：（最常用）
SELECT * FROM student WHERE NAME LIKE &#39;%马%&#39;;
id    name    age    gender    address    math    english
1    马云    55    男    杭州    66    78
2    马化腾    45    女    深圳    98    87
3    马景涛    55    男    香港    56    77
7    马德    22    女    香港    99    99
</code></pre>
<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><pre><code class="sql">* 语法：order by 子句
        * order by 排序字段1 排序方式1 ，  排序字段2 排序方式2...

    * 排序方式：
        * ASC：升序，默认的。
        * DESC：降序。

    * 注意：
        * 如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件。
</code></pre>
<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><pre><code class="sql">聚合函数：将一列数据作为一个整体，进行纵向的计算。
    1. count：计算个数
        1. 一般选择非空的列：主键 （推荐）
        2. count(*)
    2. max：计算最大值
    3. min：计算最小值
    4. sum：计算和
    5. avg：计算平均值
    
    * 注意：聚合函数的计算，排除null值。
        解决方案：
            1. 选择不包含非空的列进行计算
            2. IFNULL函数
</code></pre>
<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><pre><code class="sql">1. 语法：group by 分组字段；
2. 注意：
    1. 分组之后查询的字段：分组字段、聚合函数
    2. where 和 having 的区别？
        1. where 在分组之前进行限定，如果不满足条件，则不参与分组；
           having在分组之后进行限定，如果不满足结果，则不会被查询出来。
        2. where 后不可以跟聚合函数，having可以进行聚合函数的判断。

    -- 按照性别分组。分别查询男、女同学的平均分
    SELECT sex , AVG(math) FROM student GROUP BY sex;

    -- 按照性别分组。分别查询男、女同学的平均分,人数
    SELECT sex , AVG(math),COUNT(id) FROM student GROUP BY sex;

    --  按照性别分组。分别查询男、女同学的平均分,人数 要求：分数低于70分的人，不参与分组
    SELECT sex , AVG(math),COUNT(id) FROM student WHERE math &gt; 70 GROUP BY sex;

    --  按照性别分组。分别查询男、女同学的平均分,人数 要求：分数低于70分的人，不参与分组,分组之后。人数要大于2个人
    SELECT sex , AVG(math),COUNT(id) FROM student WHERE math &gt; 70 GROUP BY sex HAVING COUNT(id) &gt; 2;

    SELECT sex , AVG(math),COUNT(id) nums FROM student WHERE math &gt; 70 GROUP BY sex HAVING nums &gt; 2;
</code></pre>
<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><pre><code class="sql">1. 语法：limit 开始的索引,每页查询的条数;
2. 公式：开始的索引 = （当前的页码 - 1） * 每页显示的条数

    -- 每页显示3条记录 
    SELECT * FROM student LIMIT 0,3; -- 第1页

    SELECT * FROM student LIMIT 3,3; -- 第2页

    SELECT * FROM student LIMIT 6,3; -- 第3页

3. limit 是一个MySQL&quot;方言&quot;，MySQL特有！
</code></pre>
<hr>
<h2 id="DCL：管理用户，授权"><a href="#DCL：管理用户，授权" class="headerlink" title="DCL：管理用户，授权"></a>DCL：管理用户，授权</h2><pre><code class="sql">1. 管理用户
    1. 添加用户：
        * 语法：CREATE USER &#39;用户名&#39;@&#39;主机名&#39; IDENTIFIED BY &#39;密码&#39;;
        
        -- 演示：
        create user &#39;zhangsan&#39;@&#39;localhost&#39; identified by &#39;1234&#39;;
        select host, user, password from user;
        -- 查询结果：
        host        user    password
        localhost    root    *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B
        localhost    zhangsan    *A4B6157319038724E3560894F7F932C8886EBFCF
        %            root    *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19
        -- 登录成功！
        C:\Users\LeBro&gt;mysql -uzhangsan -p1234
        Welcome to the MySQL monitor.  Commands end with ; or \g.
        Your MySQL connection id is 35
        Server version: 5.5.40 MySQL Community Server (GPL)

        Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.

        Oracle is a registered trademark of Oracle Corporation and/or its
        affiliates. Other names may be trademarks of their respective
        owners.

        Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.

        mysql&gt;

    2. 删除用户：
        * 语法：DROP USER &#39;用户名&#39;@&#39;主机名&#39;;
        -- 演示：
        drop user &#39;zhangsan&#39;@&#39;localhost&#39;;        
        SELECT HOST, USER, PASSWORD FROM USER;
        -- 查询用户：
        host        user    password
        localhost    root    *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B
        %            root    *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19
    3. 修改用户密码：
        * 语法：
        -- 方式一：
        UPDATE USER SET PASSWORD = PASSWORD(&#39;新密码&#39;) WHERE USER = &#39;用户名&#39;;
        -- 演示：
        UPDATE USER SET PASSWORD = PASSWORD(&#39;abc&#39;) WHERE USER = &#39;lisi&#39;;
        
        -- 方式二：
        SET PASSWORD FOR &#39;用户名&#39;@&#39;主机名&#39; = PASSWORD(&#39;新密码&#39;);
        -- 演示：
        SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; = PASSWORD(&#39;123&#39;);

        * mysql中忘记了root用户的密码？
            1. cmd -- &gt; net stop mysql 停止mysql服务
                * 需要管理员运行该cmd
            2. 使用无验证方式启动mysql服务： mysqld --skip-grant-tables
            3. 打开新的cmd窗口,直接输入mysql命令，敲回车。就可以登录成功
            4. use mysql;
            5. update user set password = password(&#39;你的新密码&#39;) where user = &#39;root&#39;;
            6. 关闭两个窗口
            7. 打开任务管理器，手动结束mysqld.exe 的进程
            8. 启动mysql服务
            9. 使用新密码登录。
    4. 查询用户：
        -- 1. 切换到mysql数据库
        USE myql;
        -- 2. 查询user表
        SELECT * FROM USER;
        -- 查询结果示例：
        Host        User    Password        
        %            root    *2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19        
        localhost    root    *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B    
        
        * 通配符： % 表示可以在任意主机使用用户登录数据库

2. 权限管理：
    1. 查询权限：
        -- 查询权限
        SHOW GRANTS FOR &#39;用户名&#39;@&#39;主机名&#39;;
        -- 演示：
        SHOW GRANTS FOR &#39;lisi&#39;@&#39;%&#39;;
        -- 查询结果：
        Grants for lisi@localhost -- 列名
        GRANT USAGE ON *.* TO &#39;lisi&#39;@&#39;localhost&#39; -- USAGE “无权限”，只可以登录。
        IDENTIFIED BY PASSWORD &#39;*A4B6157319038724E3560894F7F932C8886EBFCF&#39;
        -- USAGE：让你这个用户可以像个用户似的登录，但是除了能看到有那写数据库外，什么权限也没有
    2. 授予权限：
        -- 授予权限
        grant 权限列表 on 数据库名.表名 to &#39;用户名&#39;@&#39;主机名&#39;;
        -- 给张三用户授予所有权限，在任意数据库任意表上
        GRANT ALL ON *.* TO &#39;lisi&#39;@&#39;localhost&#39;;
    3. 撤销权限：
        -- 撤销权限：
        revoke 权限列表 on 数据库名.表名 from &#39;用户名&#39;@&#39;主机名&#39;;
        REVOKE UPDATE ON db_Test.`account` FROM &#39;lisi&#39;@&#39;%&#39;;
</code></pre>
<hr>
<h1 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h1><blockquote>
<p>概念： 对表中的数据进行限定，保证数据的正确性、有效性和完整性。</p>
</blockquote>
<p>分类：<br>     1. 主键约束：primary key<br>    2. 非空约束：not null<br>    3. 唯一约束：unique<br>    4. 外键约束：foreign key</p>
<h2 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h2><blockquote>
<p>not null，某一列的值不能为null</p>
</blockquote>
<pre><code class="sql">1. 创建表时添加约束
    CREATE TABLE stu(
        id INT,
        NAME VARCHAR(20) NOT NULL -- name为非空
    );
2. 创建表完后，添加非空约束
    ALTER TABLE stu MODIFY NAME VARCHAR(20) NOT NULL;

3. 删除name的非空约束
    ALTER TABLE stu MODIFY NAME VARCHAR(20);
</code></pre>
<h2 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h2><blockquote>
<p>unique，某一列的值不能重复</p>
</blockquote>
<pre><code class="sql">1. 注意：
        * 唯一约束可以有NULL值，但是只能有一条记录为null
2. 在创建表时，添加唯一约束
    CREATE TABLE stu(
        id INT,
        phone_number VARCHAR(20) UNIQUE -- 手机号
    );
3. 删除唯一约束
    ALTER TABLE stu DROP INDEX phone_number;
4. 在表创建完后，添加唯一约束
    ALTER TABLE stu MODIFY phone_number VARCHAR(20) UNIQUE;
</code></pre>
<h2 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h2><blockquote>
<p>primary key ：非空且唯一</p>
</blockquote>
<pre><code class="sql">1. 注意：
    1. 含义：非空且唯一
    2. 一张表只能有一个字段为主键
    3. 主键就是表中记录的唯一标识

2. 在创建表时，添加主键约束
    create table stu(
        id int primary key,-- 给id添加主键约束
        name varchar(20)
    );

3. 删除主键
    -- 错误 alter table stu modify id int ; --不报错也不起作用！
    ALTER TABLE stu DROP PRIMARY KEY;

4. 创建完表后，添加主键
    ALTER TABLE stu MODIFY id INT PRIMARY KEY;

5. 自动增长：
    1.  概念：如果某一列是数值类型的，使用 auto_increment 可以来完成值得自动增长

    2. 在创建表时，添加主键约束，并且完成主键自增长
    create table stu(
        id int primary key auto_increment,-- 给id添加主键约束
        name varchar(20)
    );
    3. 删除自动增长
        ALTER TABLE stu MODIFY id INT;
        4. 添加自动增长
        ALTER TABLE stu MODIFY id INT AUTO_INCREMENT;
</code></pre>
<h2 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h2><blockquote>
<p>foreign key,让表于表产生关系，从而保证数据的正确性</p>
</blockquote>
<pre><code class="sql">1. 在创建表时，可以添加外键
    * 语法：
        create table 表名(
            ....
            外键列
            constraint 外键名称 foreign key (外键列名称) references 主表名称(主表列名称)
        );
        
    * 例子：
        create table employee(
            id int primary key auto_increment,
            name varchar(20),
            age int,
            dep_id int, -- 外键列：外键对应主表的主键
            -- 创建外键约束
            constraint emp_depid_fk foreign key (dep_id) references
            department(id) on update cascade on delete cascade --同时实现级联操作
        );

2. 删除外键
    ALTER TABLE 表名 DROP FOREIGN KEY 外键名称;

3. 创建表之后，添加外键
    ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称);
    
4. 级联操作
    1. 添加级联操作
        语法：ALTER TABLE 表名 ADD CONSTRAINT 外键名称 
             FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称) ON UPDATE CASCADE ON DELETE CASCADE;
    2. 分类：
        1. 级联更新：ON UPDATE CASCADE 
        2. 级联删除：ON DELETE CASCADE 
</code></pre>
<blockquote>
<p>数据冗余</p>
</blockquote>
<pre><code class="sql">CREATE TABLE emp (
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(30),
    age INT,
    dep_name VARCHAR(30),
    dep_location VARCHAR(30)
);

-- 添加数据
INSERT INTO emp (NAME, age, dep_name, dep_location) VALUES (&#39;张三&#39;, 20, &#39;研发部&#39;, &#39;广州&#39;);
INSERT INTO emp (NAME, age, dep_name, dep_location) VALUES (&#39;李四&#39;, 21, &#39;研发部&#39;, &#39;广州&#39;);
INSERT INTO emp (NAME, age, dep_name, dep_location) VALUES (&#39;王五&#39;, 20, &#39;研发部&#39;, &#39;广州&#39;);
INSERT INTO emp (NAME, age, dep_name, dep_location) VALUES (&#39;老王&#39;, 20, &#39;销售部&#39;, &#39;深圳&#39;);
INSERT INTO emp (NAME, age, dep_name, dep_location) VALUES (&#39;大王&#39;, 22, &#39;销售部&#39;, &#39;深圳&#39;);
INSERT INTO emp (NAME, age, dep_name, dep_location) VALUES (&#39;小王&#39;, 18, &#39;销售部&#39;, &#39;深圳&#39;);

select * from emp;
id    NAME    age    dep_name    dep_location
1    张三    20    研发部    广州
2    李四    21    研发部    广州
3    王五    20    研发部    广州
4    老王    20    销售部    深圳
5    大王    22    销售部    深圳
6    小王    18    销售部    深圳


-- 出现了数据冗余，拆分表！
-- 解决方案：分成 2 张表

-- 创建部门表(id,dep_name,dep_location)
-- 一方，主表
create table department(
    id int primary key auto_increment,
    dep_name varchar(20),
    dep_location varchar(20)
);

-- 创建员工表(id,name,age,dep_id)
-- 多方，从表
create table employee(
    id int primary key auto_increment,
    name varchar(20),
    age int,
    dep_id int -- 外键对应主表的主键
)

-- 添加 2 个部门
insert into department values(null, &#39;研发部&#39;,&#39;广州&#39;),(null, &#39;销售部&#39;, &#39;深圳&#39;);
select * from department;
id    dep_name    dep_location
1    研发部    广州
2    销售部    深圳

-- 添加员工,dep_id 表示员工所在的部门
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;张三&#39;, 20, 1);
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;李四&#39;, 21, 1);
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;王五&#39;, 20, 1);
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;老王&#39;, 20, 2);
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;大王&#39;, 22, 2);
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;小王&#39;, 18, 2);
select * from employee;
id    name    age    dep_id
1    张三    20    1
2    李四    21    1
3    王五    20    1
4    老王    20    2
5    大王    22    2
6    小王    18    2
</code></pre>
<blockquote>
<p> 实现外键约束</p>
</blockquote>
<pre><code class="sql">-- 1) 删除副表/从表 employee
DROP TABLE employee;
-- 2) 创建从表 employee 并添加外键约束 emp_depid_fk
-- 多方，从表
CREATE TABLE employee(
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(20),
    age INT,
    dep_id INT, -- 外键对应主表的主键
    -- 创建外键约束
    CONSTRAINT emp_depid_fk FOREIGN KEY (dep_id) REFERENCES department(id)
)
-- 3) 正常添加数据
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;张三&#39;, 20, 1);
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;李四&#39;, 21, 1);
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;王五&#39;, 20, 1);
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;老王&#39;, 20, 2);
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;大王&#39;, 22, 2);
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;小王&#39;, 18, 2);
SELECT * FROM employee;

-- 4) 部门错误的数据添加失败
-- 插入不存在的部门 （外键值可以为null，但是不能为不存在的值）
-- Cannot add or update a child row: a foreign key constraint fails
INSERT INTO employee (NAME, age, dep_id) VALUES (&#39;老张&#39;, 18, 6);

-- 删除 employee 表的 emp_depid_fk 外键
alter table employee drop foreign key emp_depid_fk;

-- 在 employee 表情存在的情况下添加外键
alter table employee add constraint emp_depid_fk foreign key (dep_id) references department(id);
</code></pre>
<blockquote>
<p>级联</p>
<p>在修改和删除主表的主键时，同时更新或删除副表的外键值，称为级联操作</p>
<p>ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称) </p>
<p>ON UPDATE CASCADE ON DELETE CASCADE;</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">级联操作语法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ON UPDATE CASCADE</td>
<td>级联更新，只能是创建表的时候创建级联关系。更新主表中的主键，从表中的外键列也自动同步更新</td>
</tr>
<tr>
<td align="center">ON DELETE CASCADE</td>
<td>级联删除</td>
</tr>
</tbody></table>
<pre><code class="sql">-- 新的问题
    -- 要把部门表中的 id 值 2，改成 5，能不能直接更新呢？
    -- Cannot delete or update a parent row: a foreign key constraint fails
    update department set id=5 where id=2;
    
    -- 要删除部门 id 等于 1 的部门, 能不能直接删除呢？
    -- Cannot delete or update a parent row: a foreign key constraint fails
    delete from department where id=1;
    
-- 实现级联操作：

    -- 先删除 employee 表的 emp_depid_fk 外键
    ALTER TABLE employee DROP FOREIGN KEY emp_depid_fk;
    -- 设置级联更新
    ALTER TABLE employee ADD CONSTRAINT emp_depid_fk FOREIGN KEY (dep_id) REFERENCES department(id) ON UPDATE CASCADE;
    UPDATE department SET id=5 WHERE id=2;
    SELECT * FROM department;
    SELECT * FROM employee;
    -- 可以更新了！
    id    dep_name    dep_location
    1    研发部    广州
    5    销售部    深圳
    id    name    age    dep_id
    1    张三    20    1
    2    李四    21    1
    3    王五    20    1
    4    老王    20    5
    5    大王    22    5
    6    小王    18    5
    
    -- 级联删除
    -- 先删除 employee 表的 emp_depid_fk 外键
    ALTER TABLE employee DROP FOREIGN KEY emp_depid_fk;
    -- 设置级联删除
    ALTER TABLE employee ADD CONSTRAINT emp_depid_fk FOREIGN KEY (dep_id) REFERENCES department(id) ON DELETE CASCADE;
    DELETE FROM department WHERE id=1;
    SELECT * FROM department;
    SELECT * FROM employee;
    -- 可以删除了！
    id    dep_name    dep_location
    5    销售部    深圳
    id    name    age    dep_id
    4    老王    20    5
    5    大王    22    5
    6    小王    18    5
</code></pre>
<blockquote>
<p>小结：级联操作要谨慎设置！</p>
</blockquote>
<table>
<thead>
<tr>
<th>约束名</th>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>主键</td>
<td>primary key</td>
<td>唯一且非空</td>
</tr>
<tr>
<td>默认</td>
<td>default</td>
<td>如果一列没有值，使用默认值</td>
</tr>
<tr>
<td>非空</td>
<td>not null</td>
<td>这一列必须有值</td>
</tr>
<tr>
<td>唯一</td>
<td>unique</td>
<td>这一列不能有重复值</td>
</tr>
<tr>
<td>外键</td>
<td>foreign key</td>
<td>主表中主键列（id），在从表中外键列(dep_id)</td>
</tr>
</tbody></table>
<hr>
<h1 id="数据库的设计"><a href="#数据库的设计" class="headerlink" title="数据库的设计"></a>数据库的设计</h1><h2 id="多表之间的关系"><a href="#多表之间的关系" class="headerlink" title="多表之间的关系"></a>多表之间的关系</h2><blockquote>
<p>分类</p>
</blockquote>
<pre><code class="sql">1. 一对一(了解)：
    * 如：人和身份证
    * 分析：一个人只有一个身份证，一个身份证只能对应一个人
2. 一对多(多对一)：
    * 如：部门和员工
    * 分析：一个部门有多个员工，一个员工只能对应一个部门
3. 多对多：
    * 如：学生和课程
    * 分析：一个学生可以选择很多门课程，一个课程也可以被很多学生选择    
</code></pre>
<blockquote>
<p>实现关系</p>
<p>一对多结构图</p>
<p>如：部门和员工<br>分析：一个部门有多个员工，一个员工只能对应一个部门</p>
</blockquote>
<p><img src="/2021/03/23/MySQLearningNote/image-20210328153207034.png" alt="image-20210328153207034"></p>
<blockquote>
<p>多对多结构图</p>
<p>如：学生和课程<br>实现方式：多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键</p>
</blockquote>
<p><img src="/2021/03/23/MySQLearningNote/image-20210328154906892.png" alt="image-20210328154906892"></p>
<blockquote>
<p>一对一结构图</p>
<p>如：人和身份证</p>
<p>实现方式：一对一关系实现，可以在任意一方添加唯一外键指向另一方的主键。</p>
</blockquote>
<p><img src="/2021/03/23/MySQLearningNote/image-20210328155650922.png" alt="image-20210328155650922"></p>
<p><strong>注：一般会直接合并成一张表！</strong> </p>
<blockquote>
<p>案例：结构图分析</p>
</blockquote>
<p><img src="/2021/03/23/MySQLearningNote/image-20210328161247977.png" alt="image-20210328161247977"></p>
<pre><code class="sql">-- 创建旅游线路分类表 tab_category
    -- cid 旅游线路分类主键，自动增长
    -- cname 旅游线路分类名称非空，唯一，字符串 100
    CREATE TABLE tab_category (
        cid INT PRIMARY KEY AUTO_INCREMENT,
        cname VARCHAR(100) NOT NULL UNIQUE
    );

    -- 创建旅游线路表 tab_route
    /*
    rid 旅游线路主键，自动增长
    rname 旅游线路名称非空，唯一，字符串 100
    price 价格
    rdate 上架时间，日期类型
    cid 外键，所属分类
    */
    CREATE TABLE tab_route(
        rid INT PRIMARY KEY AUTO_INCREMENT,
        rname VARCHAR(100) NOT NULL UNIQUE,
        price DOUBLE,
        rdate DATE,
        cid INT,
        FOREIGN KEY (cid) REFERENCES tab_category(cid) --省略外键写法
    );

    /*创建用户表 tab_user
    uid 用户主键，自增长
    username 用户名长度 100，唯一，非空
    password 密码长度 30，非空
    name 真实姓名长度 100
    birthday 生日
    sex 性别，定长字符串 1
    telephone 手机号，字符串 11
    email 邮箱，字符串长度 100
    */
    CREATE TABLE tab_user (
        uid INT PRIMARY KEY AUTO_INCREMENT,
        username VARCHAR(100) UNIQUE NOT NULL,
        PASSWORD VARCHAR(30) NOT NULL,
        NAME VARCHAR(100),
        birthday DATE,
        sex CHAR(1) DEFAULT &#39;男&#39;,
        telephone VARCHAR(11),
        email VARCHAR(100)
    );

    /*
    创建收藏表 tab_favorite
    rid 旅游线路 id，外键
    date 收藏时间
    uid 用户 id，外键
    rid 和 uid 不能重复，设置复合主键，同一个用户不能收藏同一个线路两次
    */
    CREATE TABLE tab_favorite (
        rid INT, -- 线路id
        DATE DATETIME,
        uid INT, -- 用户id
        -- 创建复合主键
        PRIMARY KEY(rid,uid), -- 联合主键
        FOREIGN KEY (rid) REFERENCES tab_route(rid),
        FOREIGN KEY(uid) REFERENCES tab_user(uid)
    );
</code></pre>
<blockquote>
<p>结构图查看</p>
</blockquote>
<p><img src="/2021/03/23/MySQLearningNote/image-20210328162130951.png" alt="image-20210328162130951"></p>
<h2 id="数据库设计的范式"><a href="#数据库设计的范式" class="headerlink" title="数据库设计的范式"></a>数据库设计的范式</h2><blockquote>
<p>概念：</p>
<ul>
<li><p>设计数据库时，需要遵循的一些规范。</p>
</li>
<li><p>要遵循后边的范式要求，必须先遵循前边的所有范式要求</p>
</li>
</ul>
</blockquote>
<pre><code class="sql">设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。
- 目前关系数据库有六种范式：
    - 第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、【一般满足前三种即可】
    - 巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。
</code></pre>
<blockquote>
<p>分类</p>
</blockquote>
<ol>
<li><p>第一范式（1NF）：每一列都是不可分割的原子数据项</p>
</li>
<li><p>第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上消除非主属性对主码的部分函数依赖）</p>
<pre><code>* 几个概念：
    1. 函数依赖：A--&gt;B,如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A
        例如：学号--&gt;姓名。  （学号，课程名称） --&gt; 分数
    2. 完全函数依赖：A--&gt;B， 如果A是一个属性组，则B属性值得确定需要依赖于A属性组中所有的属性值。
        例如：（学号，课程名称） --&gt; 分数
    3. 部分函数依赖：A--&gt;B， 如果A是一个属性组，则B属性值得确定只需要依赖于A属性组中某一些值即可。
        例如：（学号，课程名称） -- &gt; 姓名
    4. 传递函数依赖：A--&gt;B, B -- &gt;C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A
        例如：学号--&gt;系名，系名--&gt;系主任
    5. 码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码
        例如：该表中码为：（学号，课程名称）
        * 主属性：码属性组中的所有属性
        * 非主属性：除去码属性组的属性
</code></pre>
</li>
<li><p>第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）</p>
</li>
</ol>
<blockquote>
<p>初始表：</p>
</blockquote>
<p><img src="/2021/03/23/MySQLearningNote/image-20210328163354932.png" alt="image-20210328163354932"></p>
<blockquote>
<p>修改后满足第一范式，但仍存在的问题：</p>
<ol>
<li>存在非常严重的数据冗余（重复）：姓名-系名-系主任</li>
<li>数据添加存在问题：添加新开设的系和系主任时，数据不合法</li>
<li>数据删除也存在问题：张无忌同学毕业了，删除数据，会将系的数据一起删除</li>
</ol>
</blockquote>
<p><img src="/2021/03/23/MySQLearningNote/image-20210328163505294.png" alt="image-20210328163505294"></p>
<blockquote>
<p>修改后满足第二范式：（在1NF基础上消除非主属性对主码的部分函数依赖）</p>
<p>​    非码属性必须完全依赖于码，（学号，课程名称） –&gt; 分数；学号 –&gt; 姓名/系名/系主任</p>
<p>但仍未解决第2, 3问题</p>
</blockquote>
<p><img src="/2021/03/23/MySQLearningNote/image-20210328171157606.png" alt="image-20210328171157606"></p>
<blockquote>
<p>修改后满足第三范式（在2NF基础上消除传递依赖）</p>
<p>全部解决！</p>
</blockquote>
<p><img src="/2021/03/23/MySQLearningNote/image-20210328172818747.png" alt="image-20210328172818747"></p>
<hr>
<h1 id="数据库的备份和还原"><a href="#数据库的备份和还原" class="headerlink" title="数据库的备份和还原"></a>数据库的备份和还原</h1><blockquote>
<p>命令行</p>
</blockquote>
<pre><code class="sql">* 语法：
    * 备份： mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径
    * 还原：
        1. 登录数据库
        2. 创建数据库
        3. 使用数据库
        4. 执行文件：source 文件路径
 
 * 实战：
         -- 备份数据库
        C:\Users\LeBro&gt;mysqldump -uroot -proot db_test &gt; D://DatabaseBackUP//bptest.sql
        
        mysql&gt; show databases;
        +--------------------+
        | Database           |
        +--------------------+
        | information_schema |
        | db_test            |
        | mysql              |
        | performance_schema |
        | test               |
        +--------------------+
        5 rows in set (0.00 sec)
        -- 删除数据库
        mysql&gt; drop database db_test;
        Query OK, 9 rows affected (0.05 sec)

        mysql&gt; show databases;
        +--------------------+
        | Database           |
        +--------------------+
        | information_schema |
        | mysql              |
        | performance_schema |
        | test               |
        +--------------------+
        4 rows in set (0.00 sec)

        -- 还原数据库
        mysql&gt; create database db_test;
        Query OK, 1 row affected (0.00 sec)

        mysql&gt; use db_test;
        Database changed
        
        mysql&gt; source D://DatabaseBackUP//bptest.sql;
        mysql&gt; show tables;
        +-------------------+
        | Tables_in_db_test |
        +-------------------+
        | department        |
        | emp               |
        | employee          |
        | stu               |
        | student           |
        | tab_category      |
        | tab_favorite      |
        | tab_route         |
        | tab_user          |
        +-------------------+
        9 rows in set (0.00 sec)
</code></pre>
<blockquote>
<p>图形化工具 ：提示操作即可。</p>
</blockquote>
<hr>
<h1 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h1><blockquote>
<p>数据准备</p>
</blockquote>
<pre><code class="sql">-- 创建部门表
CREATE TABLE dept(
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(20)
);
INSERT INTO dept (NAME) VALUES (&#39;开发部&#39;),(&#39;市场部&#39;),(&#39;财务部&#39;);
-- 创建员工表
CREATE TABLE emp (
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(10),
    gender CHAR(1), -- 性别
    salary DOUBLE, -- 工资
    join_date DATE, -- 入职日期
    dept_id INT,
    FOREIGN KEY (dept_id) REFERENCES dept(id) -- 外键，关联部门表(部门表的主键)
);
INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES(&#39;孙悟空&#39;,&#39;男&#39;,7200,&#39;2013-02-24&#39;,1);
INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES(&#39;猪八戒&#39;,&#39;男&#39;,3600,&#39;2010-12-02&#39;,2);
INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES(&#39;唐僧&#39;,&#39;男&#39;,9000,&#39;2008-08-08&#39;,2);
INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES(&#39;白骨精&#39;,&#39;女&#39;,5000,&#39;2015-10-07&#39;,3);
INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES(&#39;蜘蛛精&#39;,&#39;女&#39;,4500,&#39;2011-03-14&#39;,1);
</code></pre>
<h2 id="笛卡尔积"><a href="#笛卡尔积" class="headerlink" title="笛卡尔积"></a>笛卡尔积</h2><blockquote>
<p>有两个集合A,B，取这两个集合的所有组成情况。<br>要完成多表查询，需要消除无用的数据</p>
</blockquote>
<pre><code class="sql">SELECT * FROM emp;

SELECT * FROM dept;

SELECT * FROM emp, dept;

-- emp 5条数据
id    NAME    gender    salary    join_date    dept_id
1    孙悟空    男    7200    2013-02-24    1
2    猪八戒    男    3600    2010-12-02    2
3    唐僧    男    9000    2008-08-08    2
4    白骨精    女    5000    2015-10-07    3
5    蜘蛛精    女    4500    2011-03-14    1

-- dept 3条数据
id    NAME
1    开发部
2    市场部
3    财务部

-- 笛卡尔积 3*5=15条数据
id    NAME    gender    salary    join_date    dept_id    id    NAME
1    孙悟空    男    7200    2013-02-24    1    1    开发部
1    孙悟空    男    7200    2013-02-24    1    2    市场部
1    孙悟空    男    7200    2013-02-24    1    3    财务部
2    猪八戒    男    3600    2010-12-02    2    1    开发部
2    猪八戒    男    3600    2010-12-02    2    2    市场部
2    猪八戒    男    3600    2010-12-02    2    3    财务部
3    唐僧    男    9000    2008-08-08    2    1    开发部
3    唐僧    男    9000    2008-08-08    2    2    市场部
3    唐僧    男    9000    2008-08-08    2    3    财务部
4    白骨精    女    5000    2015-10-07    3    1    开发部
4    白骨精    女    5000    2015-10-07    3    2    市场部
4    白骨精    女    5000    2015-10-07    3    3    财务部
5    蜘蛛精    女    4500    2011-03-14    1    1    开发部
5    蜘蛛精    女    4500    2011-03-14    1    2    市场部
5    蜘蛛精    女    4500    2011-03-14    1    3    财务部
</code></pre>
<h2 id="内连接查询"><a href="#内连接查询" class="headerlink" title="内连接查询"></a>内连接查询</h2><blockquote>
<ol>
<li>隐式内连接：使用where条件消除无用数据</li>
</ol>
</blockquote>
<pre><code class="sql">-- 查询所有员工信息和对应的部门信息
SELECT * FROM emp,dept WHERE emp.`dept_id` = dept.`id`;
id    NAME    gender    salary    join_date    dept_id    id    NAME
1    孙悟空    男    7200    2013-02-24    1    1    开发部
2    猪八戒    男    3600    2010-12-02    2    2    市场部
3    唐僧    男    9000    2008-08-08    2    2    市场部
4    白骨精    女    5000    2015-10-07    3    3    财务部
5    蜘蛛精    女    4500    2011-03-14    1    1    开发部

-- 查询员工表的名称，性别。部门表的名称
SELECT emp.name,emp.gender,dept.name FROM emp,dept WHERE emp.`dept_id` = dept.`id`;
-- 规范写法：
SELECT 
    t1.`name`, -- 员工表的姓名
    t1.`gender`, -- 员工表的性别
    t2.`name` -- 部门表的名称
FROM
    emp t1, -- 员工表
    dept t2 -- 部门表
WHERE 
    t1.`dept_id`=t2.`id`;
    
name    gender    name
孙悟空    男    开发部
猪八戒    男    市场部
唐僧    男    市场部
白骨精    女    财务部
蜘蛛精    女    开发部
</code></pre>
<blockquote>
<ol start="2">
<li><p>显式内连接：select 字段列表 from 表名1 [inner] join 表名2 on 条件</p>
<ul>
<li><p>与隐式内连接结果一致</p>
</li>
<li><p>inner 可省略</p>
</li>
<li><p>查询交集部分</p>
</li>
</ul>
</li>
</ol>
</blockquote>
<pre><code class="sql">SELECT 
    t1.`NAME`,
    t1.`gender`,
    t2.`NAME`
FROM 
    emp t1
INNER JOIN 
    dept t2
ON 
    t1.`dept_id`=t2.`id`    
    
NAME    gender    NAME
孙悟空    男    开发部
猪八戒    男    市场部
唐僧    男    市场部
白骨精    女    财务部
蜘蛛精    女    开发部
</code></pre>
<blockquote>
<p>小结：</p>
<ul>
<li>从哪些表中查询数据</li>
<li>条件是什么</li>
<li>查询哪些字段</li>
</ul>
</blockquote>
<h2 id="外链接查询"><a href="#外链接查询" class="headerlink" title="外链接查询"></a>外链接查询</h2><blockquote>
<ol>
<li>左外连接：select 字段列表 from 表1 left [outer] join 表2 on 条件；</li>
</ol>
<p>查询的是左表所有数据以及其交集部分。</p>
</blockquote>
<pre><code class="sql">-- 查询所有员工信息，如果员工有部门，则查询部门名称，没有部门，则不显示部门名称
    -- emp
    id    NAME    gender    salary    join_date    dept_id
    1    孙悟空    男    7200    2013-02-24    1
    2    猪八戒    男    3600    2010-12-02    2
    3    唐僧    男    9000    2008-08-08    2
    4    白骨精    女    5000    2015-10-07    3
    5    蜘蛛精    女    4500    2011-03-14    1
    6    小白龙    女    4500    2021-03-29    \N
    -- dept
    id    NAME
    1    开发部
    2    市场部
    3    财务部
    
    -- 隐式查询（求交集）
    SELECT t1.*, t2.`NAME`
    FROM 
        emp t1, dept t2
    WHERE 
        t1.`dept_id`=t2.`id`
        
    -- 同 inner join（求交集）
    select t1.*, t2.`NAME`
    From
        emp t1
    inner join
        dept t2
    on t1.`dept_id`=t2.`id`   
    
    -- 小白龙 dept_id 为 null，不显示！
    id    NAME    gender    salary    join_date    dept_id    NAME
    1    孙悟空    男    7200    2013-02-24    1    开发部
    2    猪八戒    男    3600    2010-12-02    2    市场部
    3    唐僧    男    9000    2008-08-08    2    市场部
    4    白骨精    女    5000    2015-10-07    3    财务部
    5    蜘蛛精    女    4500    2011-03-14    1    开发部
    
-- 查询所有员工信息，如果员工有部门，则查询部门名称，没有部门，则不显示部门名称
select t1.*, t2.`NAME`
From
    emp t1
left join
    dept t2
on t1.`dept_id`=t2.`id`
-- 左外连接实现目的：（以左表为基准求交集）
id    NAME    gender    salary    join_date    dept_id    NAME
1    孙悟空    男    7200    2013-02-24    1    开发部
2    猪八戒    男    3600    2010-12-02    2    市场部
3    唐僧    男    9000    2008-08-08    2    市场部
4    白骨精    女    5000    2015-10-07    3    财务部
5    蜘蛛精    女    4500    2011-03-14    1    开发部
6    小白龙    女    4500    2021-03-29    \N    \N
</code></pre>
<blockquote>
<ol start="2">
<li>右外连接：select 字段列表 from 表1 right [outer] join 表2 on 条件；</li>
</ol>
<p>查询的是右表所有数据以及其交集部分。</p>
</blockquote>
<pre><code class="sql">-- 查询所有员工信息，如果员工有部门，则查询部门名称，没有部门，则不显示部门名称
select t1.*, t2.`NAME`
From
    emp t1
right join
    dept t2
on t1.`dept_id`=t2.`id`
-- 右连接实现目的：（以右表为基准求交集）
id    NAME    gender    salary    join_date    dept_id    NAME
1    孙悟空    男    7200    2013-02-24    1    开发部
5    蜘蛛精    女    4500    2011-03-14    1    开发部
2    猪八戒    男    3600    2010-12-02    2    市场部
3    唐僧    男    9000    2008-08-08    2    市场部
4    白骨精    女    5000    2015-10-07    3    财务部
</code></pre>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><blockquote>
<p>查询中嵌套查询，称嵌套查询为子查询</p>
</blockquote>
<pre><code class="sql">-- 查询工资最高的员工信息
    -- 1 查询最高的工资是多少 9000
    SELECT MAX(salary) FROM emp;

    -- 2 查询员工信息，并且工资等于9000的
    SELECT * FROM emp WHERE emp.`salary` = 9000;

    -- 一条sql就完成这个操作，子查询
    SELECT * FROM emp WHERE emp.`salary` = (SELECT MAX(salary) FROM emp);
</code></pre>
<p><strong>子查询不同情况</strong> </p>
<blockquote>
<ul>
<li>子查询的结果是单行单列的<ul>
<li>子查询可以作为条件，使用运算符去判断。</li>
<li> 运算符： &gt; &gt;= &lt; &lt;= =</li>
</ul>
</li>
</ul>
</blockquote>
<pre><code class="sql">-- 查询员工工资小于平均工资的人
SELECT 
    *
FROM 
    emp
WHERE
    emp.`salary` &lt; (SELECT AVG(emp.`salary`) FROM emp)
    
id    NAME    gender    salary    join_date    dept_id
2    猪八戒    男    3600    2010-12-02    2
4    白骨精    女    5000    2015-10-07    3
5    蜘蛛精    女    4500    2011-03-14    1
6    小白龙    女    4500    2021-03-29    \N
</code></pre>
<blockquote>
<ul>
<li>子查询的结果是多行单列的<ul>
<li>子查询可以作为条件，使用运算符in来判断</li>
</ul>
</li>
</ul>
</blockquote>
<pre><code class="sql">-- 查询&#39;财务部&#39;和&#39;市场部&#39;所有的员工信息
SELECT id FROM dept WHERE NAME = &#39;财务部&#39; OR NAME = &#39;市场部&#39;;
SELECT * FROM emp WHERE dept_id = 3 OR dept_id = 2;
-- 子查询
SELECT 
    *
FROM 
    emp
WHERE
    emp.`dept_id`
IN
    (SELECT dept.`id` FROM dept WHERE dept.`NAME` IN (&#39;财务部&#39;, &#39;市场部&#39;))
-- 查询结果
id    NAME    gender    salary    join_date    dept_id
2    猪八戒    男    3600    2010-12-02    2
3    唐僧    男    9000    2008-08-08    2
4    白骨精    女    5000    2015-10-07    3
</code></pre>
<blockquote>
<ul>
<li>子查询的结果是多行多列的<ul>
<li>子查询可以作为一张虚拟表参与查询</li>
</ul>
</li>
</ul>
</blockquote>
<pre><code class="sql">-- 查询员工入职日期是2011-11-11日之后的员工信息和部门信息
-- 子查询
SELECT *
FROM
    dept t1,
    (SELECT * FROM emp WHERE emp.`join_date` &gt; &#39;2011-11-11&#39;) t2
WHERE 
    t1.id = t2.dept_id
-- 查询结果
id    NAME    id    NAME    gender    salary    join_date    dept_id
1    开发部    1    孙悟空    男    7200    2013-02-24    1
3    财务部    4    白骨精    女    5000    2015-10-07    3

-- 普通内连接
    -- 隐式内连接查询
    select 
        *
    from
        dept t1,
        emp t2
    where 
        t1.`id` = t2.dept_id
    and    t2.`join_date` &gt; &#39;2011-11-11&#39;;
    -- 显示内连接查询 
    SELECT 
    *
    FROM 
        dept t1
    INNER JOIN
        emp t2
    ON 
        t1.`id` = t2.dept_id
    WHERE
        t2.join_date &gt; &#39;2011-11-11&#39;;
-- 查询结果
id    NAME    id    NAME    gender    salary    join_date    dept_id
1    开发部    1    孙悟空    男    7200    2013-02-24    1
3    财务部    4    白骨精    女    5000    2015-10-07    3
</code></pre>
<h2 id="多表查询练习："><a href="#多表查询练习：" class="headerlink" title="多表查询练习："></a>多表查询练习：</h2><blockquote>
<p>数据准备</p>
</blockquote>
<pre><code class="sql">-- 部门表
CREATE TABLE dept (
  id INT PRIMARY KEY, -- 部门id
  dname VARCHAR(50), -- 部门名称
  loc VARCHAR(50) -- 部门所在地
);

-- 添加4个部门
INSERT INTO dept(id,dname,loc) VALUES 
(10,&#39;教研部&#39;,&#39;北京&#39;),
(20,&#39;学工部&#39;,&#39;上海&#39;),
(30,&#39;销售部&#39;,&#39;广州&#39;),
(40,&#39;财务部&#39;,&#39;深圳&#39;);

-- 职务表，职务名称，职务描述
CREATE TABLE job (
  id INT PRIMARY KEY,
  jname VARCHAR(20),
  description VARCHAR(50)
);

-- 添加4个职务
INSERT INTO job (id, jname, description) VALUES
(1, &#39;董事长&#39;, &#39;管理整个公司，接单&#39;),
(2, &#39;经理&#39;, &#39;管理部门员工&#39;),
(3, &#39;销售员&#39;, &#39;向客人推销产品&#39;),
(4, &#39;文员&#39;, &#39;使用办公软件&#39;);

-- 员工表
CREATE TABLE emp (
  id INT PRIMARY KEY, -- 员工id
  ename VARCHAR(50), -- 员工姓名
  job_id INT, -- 职务id
  mgr INT , -- 上级领导
  joindate DATE, -- 入职日期
  salary DECIMAL(7,2), -- 工资
  bonus DECIMAL(7,2), -- 奖金
  dept_id INT, -- 所在部门编号
  CONSTRAINT emp_jobid_ref_job_id_fk FOREIGN KEY (job_id) REFERENCES job (id),
  CONSTRAINT emp_deptid_ref_dept_id_fk FOREIGN KEY (dept_id) REFERENCES dept (id)
);

-- 添加员工
INSERT INTO emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) VALUES 
(1001,&#39;孙悟空&#39;,4,1004,&#39;2000-12-17&#39;,&#39;8000.00&#39;,NULL,20),
(1002,&#39;卢俊义&#39;,3,1006,&#39;2001-02-20&#39;,&#39;16000.00&#39;,&#39;3000.00&#39;,30),
(1003,&#39;林冲&#39;,3,1006,&#39;2001-02-22&#39;,&#39;12500.00&#39;,&#39;5000.00&#39;,30),
(1004,&#39;唐僧&#39;,2,1009,&#39;2001-04-02&#39;,&#39;29750.00&#39;,NULL,20),
(1005,&#39;李逵&#39;,4,1006,&#39;2001-09-28&#39;,&#39;12500.00&#39;,&#39;14000.00&#39;,30),
(1006,&#39;宋江&#39;,2,1009,&#39;2001-05-01&#39;,&#39;28500.00&#39;,NULL,30),
(1007,&#39;刘备&#39;,2,1009,&#39;2001-09-01&#39;,&#39;24500.00&#39;,NULL,10),
(1008,&#39;猪八戒&#39;,4,1004,&#39;2007-04-19&#39;,&#39;30000.00&#39;,NULL,20),
(1009,&#39;罗贯中&#39;,1,NULL,&#39;2001-11-17&#39;,&#39;50000.00&#39;,NULL,10),
(1010,&#39;吴用&#39;,3,1006,&#39;2001-09-08&#39;,&#39;15000.00&#39;,&#39;0.00&#39;,30),
(1011,&#39;沙僧&#39;,4,1004,&#39;2007-05-23&#39;,&#39;11000.00&#39;,NULL,20),
(1012,&#39;李逵&#39;,4,1006,&#39;2001-12-03&#39;,&#39;9500.00&#39;,NULL,30),
(1013,&#39;小白龙&#39;,4,1004,&#39;2001-12-03&#39;,&#39;30000.00&#39;,NULL,20),
(1014,&#39;关羽&#39;,4,1007,&#39;2002-01-23&#39;,&#39;13000.00&#39;,NULL,10);

-- 工资等级表
CREATE TABLE salarygrade (
  grade INT PRIMARY KEY,   -- 级别
  losalary INT,  -- 最低工资
  hisalary INT -- 最高工资
);

-- 添加5个工资等级
INSERT INTO salarygrade(grade,losalary,hisalary) VALUES 
(1,7000,12000),
(2,12010,14000),
(3,14010,20000),
(4,20010,30000),
(5,30010,99990);
</code></pre>
<blockquote>
<p>查询所有员工信息：查询员工编号，员工姓名，工资，职务名称，职务描述</p>
</blockquote>
<pre><code class="sql">/*
    分析：
        1.员工编号，员工姓名，工资，需要查询emp表  职务名称，职务描述 需要查询job表
        2.查询条件 emp.job_id = job.id
*/

-- 方法一：
SELECT 
    t1.`id`, -- 员工编号
    t1.`ename`, -- 员工姓名
    t1.`salary`,-- 工资
    t2.`jname`, -- 职务名称
    t2.`description` -- 职务描述
FROM 
    emp t1, job t2
WHERE 
    t1.`job_id` = t2.`id`;
    
-- 方法二：
SELECT 
    t1.`id`,     -- 员工编号
    t1.`ename`,      -- 员工姓名
    t1.`salary`,     -- 工资
    t2.`jname`,     -- 职务名称
    t2.`description` -- 职务描述
FROM 
    emp t1         -- 员工表
INNER JOIN 
    job t2        -- 职务表
ON 
    t1.`job_id` = t2.`id`;
    
-- 查询结果
id    ename    salary    jname    description
1009    罗贯中    50000.00    董事长    管理整个公司，接单
1004    唐僧    29750.00    经理    管理部门员工
1006    宋江    28500.00    经理    管理部门员工
1007    刘备    24500.00    经理    管理部门员工
1002    卢俊义    16000.00    销售员    向客人推销产品
1003    林冲    12500.00    销售员    向客人推销产品
1010    吴用    15000.00    销售员    向客人推销产品
1001    孙悟空    8000.00    文员    使用办公软件
1005    李逵    12500.00    文员    使用办公软件
1008    猪八戒    30000.00    文员    使用办公软件
1011    沙僧    11000.00    文员    使用办公软件
1012    李逵    9500.00    文员    使用办公软件
1013    小白龙    30000.00    文员    使用办公软件
1014    关羽    13000.00    文员    使用办公软件
</code></pre>
<blockquote>
<p>查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置</p>
</blockquote>
<pre><code class="sql">/*
    分析：
        1. 员工编号，员工姓名，工资 emp  职务名称，职务描述 job  部门名称，部门位置 dept
        2. 条件： emp.job_id = job.id and emp.dept_id = dept.id
*/

SELECT 
    t1.`id`, -- 员工编号
    t1.`ename`, -- 员工姓名
    t1.`salary`,-- 工资
    t2.`jname`, -- 职务名称
    t2.`description`, -- 职务描述
    t3.`dname`, -- 部门名称
    t3.`loc` -- 部门位置
FROM 
    emp t1, job t2, dept t3
WHERE 
    t1.`job_id` = t2.`id` AND t1.`dept_id`=t3.`id`;
    
-- 查询结果
id    ename    salary    jname    description    dname    loc
1008    猪八戒    30000.00    文员    使用办公软件    学工部    上海
1004    唐僧    29750.00    经理    管理部门员工    学工部    上海
1001    孙悟空    8000.00    文员    使用办公软件    学工部    上海
1013    小白龙    30000.00    文员    使用办公软件    学工部    上海
1011    沙僧    11000.00    文员    使用办公软件    学工部    上海
1014    关羽    13000.00    文员    使用办公软件    教研部    北京
1007    刘备    24500.00    经理    管理部门员工    教研部    北京
1009    罗贯中    50000.00    董事长    管理整个公司，接单    教研部    北京
1003    林冲    12500.00    销售员    向客人推销产品    销售部    广州
1010    吴用    15000.00    销售员    向客人推销产品    销售部    广州
1005    李逵    12500.00    文员    使用办公软件    销售部    广州
1012    李逵    9500.00    文员    使用办公软件    销售部    广州
1006    宋江    28500.00    经理    管理部门员工    销售部    广州
1002    卢俊义    16000.00    销售员    向客人推销产品    销售部    广州
</code></pre>
<blockquote>
<p>查询员工姓名，工资，工资等级</p>
</blockquote>
<pre><code class="sql">/*
    分析：
        1.员工姓名，工资 emp  工资等级 salarygrade
        2.条件：emp.salary BETWEEN salarygrade.losalary and salarygrade.hisalary
*/

SELECT 
    t1.`ename`,
    t1.`salary`,
    t2.`grade`
FROM
    emp t1, salarygrade t2
WHERE 
    t1.`salary` BETWEEN t2.`losalary` AND t2.`hisalary`;
-- 查询的结果
ename    salary    grade
孙悟空    8000.00    1
卢俊义    16000.00    3
林冲    12500.00    2
唐僧    29750.00    4
李逵    12500.00    2
宋江    28500.00    4
刘备    24500.00    4
猪八戒    30000.00    4
罗贯中    50000.00    5
吴用    15000.00    3
沙僧    11000.00    1
李逵    9500.00    1
小白龙    30000.00    4
关羽    13000.00    2
</code></pre>
<blockquote>
<p>查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</p>
</blockquote>
<pre><code class="sql">/*
    分析：
        1. 员工姓名，工资 emp ， 职务名称，职务描述 job 部门名称，部门位置，dept  工资等级 salarygrade
        2. 条件：       emp.job_id = job.id 
                and 
                    emp.dept_id = dept.id 
                and 
                    emp.salary BETWEEN salarygrade.losalary and salarygrade.hisalary
*/

SELECT 
    t1.`ename`, -- 员工姓名
    t1.`salary`, -- 工资
    t2.`jname`, -- 职务名称
    t2.`description`, -- 职务描述 
    t3.`dname`, -- 部门名称
    t3.`loc`, -- 部门位置
    t4.`grade` -- 工资等级
FROM
    emp t1, job t2, dept t3, salarygrade t4
WHERE 
    t1.`dept_id` = t3.`id`
    AND    t1.`job_id` = t2.`id`
    AND    t1.`salary` BETWEEN t4.`losalary` AND t4.`hisalary`;
    
-- 查询结果
ename    salary    jname    description    dname    loc    grade
孙悟空    8000.00    文员    使用办公软件    学工部    上海    1
沙僧    11000.00    文员    使用办公软件    学工部    上海    1
李逵    9500.00    文员    使用办公软件    销售部    广州    1
林冲    12500.00    销售员    向客人推销产品    销售部    广州    2
李逵    12500.00    文员    使用办公软件    销售部    广州    2
关羽    13000.00    文员    使用办公软件    教研部    北京    2
卢俊义    16000.00    销售员    向客人推销产品    销售部    广州    3
吴用    15000.00    销售员    向客人推销产品    销售部    广州    3
唐僧    29750.00    经理    管理部门员工    学工部    上海    4
宋江    28500.00    经理    管理部门员工    销售部    广州    4
刘备    24500.00    经理    管理部门员工    教研部    北京    4
猪八戒    30000.00    文员    使用办公软件    学工部    上海    4
小白龙    30000.00    文员    使用办公软件    学工部    上海    4
罗贯中    50000.00    董事长    管理整个公司，接单    教研部    北京    5
</code></pre>
<blockquote>
<p>查询出部门编号、部门名称、部门位置、部门人数</p>
</blockquote>
<pre><code class="sql">/*
    分析：
        1.部门编号、部门名称、部门位置 dept 表。 部门人数 emp表
        2.使用分组查询：按照emp.dept_id完成分组，查询count(id)
        3.使用子查询将第2步的查询结果和dept表进行关联查询

*/

SELECT
    t1.id,
    t1.`dname`,
    t1.`loc`,
    t2.total
FROM 
    dept t1,    
    (SELECT 
        dept_id,
        COUNT(id) total
    FROM
        emp
    GROUP BY
        emp.`dept_id`) t2
WHERE 
    t1.`id` = t2.dept_id;
    
-- 查询结果
id    dname    loc    total
10    教研部    北京    3
20    学工部    上海    5
30    销售部    广州    6
</code></pre>
<blockquote>
<p>查询所有员工的姓名及其直接上级的姓名，没有领导的员工也需要查询</p>
</blockquote>
<pre><code class="sql">/*
    分析：
        1.姓名 emp， 直接上级的姓名 emp
            * emp表的id 和 mgr 是自关联
        2.条件 emp.id = emp.mgr
        3.查询左表的所有数据，和 交集数据
            * 使用左外连接查询

*/
SELECT 
    t1.`ename` &#39;员工&#39;,
    t2.`ename` &#39;直接上级&#39;
FROM
    emp t1
LEFT JOIN
        emp t2
ON 
    t1.`mgr` = t2.`id`;

-- 查询结果
员工    直接上级
孙悟空    唐僧
卢俊义    宋江
林冲    宋江
唐僧    罗贯中
李逵    宋江
宋江    罗贯中
刘备    罗贯中
猪八戒    唐僧
罗贯中    
吴用    宋江
沙僧    唐僧
李逵    宋江
小白龙    唐僧
关羽    刘备
</code></pre>
<hr>
<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><h2 id="事务的基本介绍"><a href="#事务的基本介绍" class="headerlink" title="事务的基本介绍"></a>事务的基本介绍</h2><blockquote>
<p>概念：如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败。</p>
</blockquote>
<ol>
<li><p>操作：</p>
<ol>
<li>开启事务： start transaction;</li>
<li>回滚：rollback;</li>
<li>提交：commit;</li>
</ol>
</li>
<li><p> 例子：</p>
</li>
</ol>
<pre><code class="sql">CREATE TABLE account (
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(10),
    balance DOUBLE
);
-- 添加数据
INSERT INTO account (NAME, balance) VALUES (&#39;zhangsan&#39;, 1000), (&#39;lisi&#39;, 1000);

SELECT * FROM account;
--还原数据
UPDATE account SET balance = 1000; 

-- 张三给李四转账 500 元:
    -- 0. 开启事务
    START TRANSACTION;
    -- 1. 张三账户 -500        
    UPDATE account SET balance = balance - 500 WHERE NAME = &#39;zhangsan&#39;;
    -- 2. 李四账户 +500
    -- 出错了...
    UPDATE account SET balance = balance + 500 WHERE NAME = &#39;lisi&#39;;

    -- 发现执行没有问题，提交事务
        -- 在提交之前是临时数据，查询数据只能看到临时更改的数据状态！
        -- 关闭mysql执行窗体之后，发现数据并未保存，原因是：自动回滚！
    COMMIT; -- 提交后数据保存！

    -- 发现出问题了，回滚事务
    ROLLBACK;
</code></pre>
<ol start="3">
<li><p>MySQL数据库中事务默认自动提交</p>
<ul>
<li>事务提交的两种方式：<ul>
<li>自动提交：<ul>
<li>一条DML(增删改)语句会自动提交一次事务。</li>
<li>MySQL 数据库默认是自动提交事务</li>
</ul>
</li>
<li>手动提交：<ul>
<li>需要先开启事务，再提交</li>
<li>Oracle 数据库默认是手动提交事务</li>
</ul>
</li>
</ul>
</li>
<li>修改事务的默认提交方式：<ul>
<li>查看事务的默认提交方式：SELECT @@autocommit; <ul>
<li>1 代表自动提交  </li>
<li>0 代表手动提交</li>
</ul>
</li>
<li>修改默认提交方式： set @@autocommit = 0;</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="事务的四大特征（重点掌握！）"><a href="#事务的四大特征（重点掌握！）" class="headerlink" title="事务的四大特征（重点掌握！）"></a>事务的四大特征（重点掌握！）</h2><blockquote>
<p>重点掌握！</p>
<p><code>ACID</code></p>
</blockquote>
<ol>
<li>原子性(<code>Atomicity</code>)：是不可分割的最小操作单位，要么同时成功，要么同时失败。</li>
<li>持久性(<code>Consistency</code>)：当事务提交或回滚后，数据库会持久化的保存数据。</li>
<li>隔离性(<code>Isolation</code>)：多个事务之间，相互独立。</li>
<li>一致性(<code>Durability</code>)：事务操作前后，数据总量不变。</li>
</ol>
<h2 id="事务的隔离级别（面试重点！）"><a href="#事务的隔离级别（面试重点！）" class="headerlink" title="事务的隔离级别（面试重点！）"></a>事务的隔离级别（面试重点！）</h2><blockquote>
<p>概念：多个事务之间是隔离的，相互独立的。</p>
<p>但是如果多个事务操作同一批数据，则会引发一些问题，设置不同的隔离级别就可以解决这些问题。</p>
</blockquote>
<ul>
<li><p>存在问题：</p>
<ol>
<li>脏读：一个事务，读取到另一个事务中没有提交的数据</li>
<li>不可重复读(虚读)：在同一个事务中，两次读取到的数据不一样 (两次的值不一样)</li>
<li>幻读：一个事务查询数据表中所有记录，另一个事务添加了一条数据，则第一个事务就好像查询不到这条数据一样 (记录数不一样)</li>
</ol>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/bobbykey/article/details/88814697">隔离级别：</a></p>
<ol>
<li><p>read uncommitted：读未提交</p>
<blockquote>
<p><code>公司发工资了，领导把5000元打到singo的账号上，但是该事务并未提交，而singo正好去查看账户，发现工资已经到账，是5000元整，非常高 兴。可是不幸的是，领导发现发给singo的工资金额不对，是2000元，于是迅速回滚了事务，修改金额后，将事务提交，最后singo实际的工资只有 2000元，singo空欢喜一场。</code></p>
<p><code>出现上述情况，即我们所说的脏读 ，两个并发的事务，“事务A：领导给singo发工资”、“事务B：singo查询工资账户”，事务B读取了事务A尚未提交的数据。</code></p>
</blockquote>
<ul>
<li>产生的问题：脏读、不可重复读、幻读</li>
<li>当隔离级别设置为Read uncommitted 时，就可能<code>出现脏读</code>，如何避免脏读，请看下一个隔离级别。</li>
</ul>
</li>
<li><p>read committed：读已提交 （Oracle）</p>
<blockquote>
<p><code>singo拿着工资卡去消费，系统读取到卡里确实有2000元，而此时她的老婆也正好在网上转账，把singo工资卡的2000元转到另一账户，并在 singo之前提交了事务，当singo扣款时，系统检查到singo的工资卡已经没有钱，扣款失败，singo十分纳闷，明明卡里有钱，为 何...... </code></p>
<p><code>出现上述情况，即我们所说的不可重复读 ，两个并发的事务，“事务A：singo消费”、“事务B：singo的老婆网上转账”，事务A事先读取了数据，事务B紧接了更新了数据，并提交了事务，而事务A再次读取该数据时，数据已经发生了改变。</code></p>
</blockquote>
<ul>
<li>解决的问题: 当隔离级别设置为Read committed 时，<code>避免了脏读</code>，但是可能会造成不可重复读。</li>
<li>产生的问题：不可重复读、幻读</li>
<li>大多数数据库的默认级别就是Read committed，比如<code>Sql Server</code> , <code>Oracle</code>。如何解决不可重复读这一问题，请看下一个隔离级别。</li>
</ul>
</li>
<li><p>repeatable read：可重复读 （MySQL默认）</p>
<blockquote>
<p><code>当singo拿着工资卡去消费时，一旦系统开始读取工资卡信息（即事务开始），singo的老婆就不可能对该记录进行修改，也就是singo的老婆不能在此时转账。</code></p>
<p>(一个事务操作时, 另一个事务就不能进行操作)</p>
<p><code>虽然Repeatable read避免了不可重复读，但还有可能出现幻读 :</code></p>
<p>(一个事务查询操作, 另一个事务插入一条记录, 就好像第一个事务查询不到这条数据一样)</p>
<p><code>singo的老婆工作在银行部门，她时常通过银行内部系统查看singo的信用卡消费记录。</code></p>
<p><code>有一天，她正在查询到singo当月信用卡的总消费金额为80元，</code></p>
<p><code>而singo此时正好在外面胡吃海塞后在收银台买单，消费1000元，即新增了一条1000元的消费记录，并提交了事务，</code></p>
<p><code>随后singo的老婆将singo当月信用卡消费的明细打印到A4纸上，却发现消费总额为1080元，singo的老婆很诧异，以为出现了幻觉，幻读就这样产生了。</code></p>
</blockquote>
<ul>
<li>解决的问题: 当隔离级别设置为Repeatable read 时，<code>可以避免不可重复读。</code></li>
<li>产生的问题：幻读</li>
</ul>
</li>
<li><p>serializable：串行化</p>
<ul>
<li>可以解决所有的问题</li>
</ul>
</li>
</ol>
</li>
<li><p>注意：隔离级别从小到大安全性越来越高，但是效率越来越低</p>
</li>
<li><p>数据库查询隔离级别：select @@tx_isolation;</p>
</li>
<li><p>数据库设置隔离级别：set global transaction isolation level  级别字符串;</p>
</li>
<li><p>演示：</p>
<pre><code class="sql">set global transaction isolation level read uncommitted;
-- set global transaction isolation level read committed;
-- set global transaction isolation level repeatable read;
start transaction;
-- 转账操作
update account set balance = balance - 500 where id = 1;
update account set balance = balance + 500 where id = 2;
</code></pre>
</li>
</ul>
<blockquote>
<p>set global transaction isolation level read uncommitted;</p>
<p>发生脏读！</p>
</blockquote>
<pre><code class="sql">-- cmd 窗口一：
mysql&gt; use db_test;
Database changed

-- 转账操作：
mysql&gt; start transaction;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; update account set balance = balance - 500 where id = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql&gt; update account set balance = balance + 500 where id = 2;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

-- 未提交！
</code></pre>
<pre><code class="sql">-- cmd 窗口二：
mysql&gt; use db_test;
Database changed

mysql&gt; select @@tx_isolation;
+------------------+
| @@tx_isolation   |
+------------------+
| READ-UNCOMMITTED |
+------------------+
1 row in set (0.00 sec)

mysql&gt; start transaction;
Query OK, 0 rows affected (0.00 sec)

-- 发送脏读：一个事务，读取到另一个事务中没有提交的数据！
mysql&gt; select * from account;
+----+----------+---------+
| id | NAME     | balance |
+----+----------+---------+
|  1 | zhangsan |     500 |
|  2 | lisi     |    1500 |
+----+----------+---------+
2 rows in set (0.00 sec)
</code></pre>
<p><strong>此时，lisi查询余额发现余额增加了500，若cmd窗口一 发生回滚，当lisi去取钱时，发现钱并未到账！</strong></p>
<blockquote>
<p>set global transaction isolation level read committed;</p>
<p>解决脏读！但是也引发了不可重复读！</p>
<p>测试之前先还原数据：update account set balance = 1000;</p>
</blockquote>
<pre><code class="sql">-- cmd窗口一：
mysql&gt; set global transaction isolation level read committed;
Query OK, 0 rows affected (0.00 sec)

-- 转账操作：
mysql&gt; start transaction;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; update account set balance = balance - 500 where id = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql&gt; update account set balance = balance + 500 where id = 2;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

-- 提交数据：
mysql&gt; commit;
Query OK, 0 rows affected (0.00 sec)
</code></pre>
<pre><code class="sql">-- cmd窗口三：
mysql&gt; select @@tx_isolation;
+----------------+
| @@tx_isolation |
+----------------+
| READ-COMMITTED |
+----------------+
1 row in set (0.00 sec)

-- 提交前的查询：
mysql&gt; select * from account;
+----+----------+---------+
| id | NAME     | balance |
+----+----------+---------+
|  1 | zhangsan |    1000 |
|  2 | lisi     |    1000 |
+----+----------+---------+
2 rows in set (0.00 sec)

-- 提交后的查询：
mysql&gt; select * from account;
+----+----------+---------+
| id | NAME     | balance |
+----+----------+---------+
|  1 | zhangsan |     500 |
|  2 | lisi     |    1500 |
+----+----------+---------+
2 rows in set (0.00 sec)

-- 也引发了不可重复读：在同一个事务中，两次读取到的数据不一样！
-- 在一些需求中，要求同一个事务（财务报表）中，每次读取到的数据要一致，只有当该事务结束的时候，才能看到其他事务对数据的修改。
</code></pre>
<p><strong>此时，lisi 发现 zhangsan 真正完成转账后（提交事务后）才能查询到自己的余额增加了500！</strong></p>
<blockquote>
<p>set global transaction isolation level repeatable read;  </p>
<p>– 解决了不可重复读！但是也引发了幻读。</p>
<p>测试之前先还原数据：update account set balance = 1000;</p>
</blockquote>
<pre><code class="sql">-- cmd 窗口一：
mysql&gt; set global transaction isolation level repeatable read;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; start transaction;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; update account set balance = balance - 500 where id = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql&gt; update account set balance = balance + 500 where id = 2;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql&gt; commit;
Query OK, 0 rows affected (0.01 sec)
</code></pre>
<pre><code class="sql">-- cmd 窗口四：
mysql&gt; use db_test;
Database changed
mysql&gt; select @@tx_isolation;
+-----------------+
| @@tx_isolation  |
+-----------------+
| REPEATABLE-READ |
+-----------------+
1 row in set (0.00 sec)

mysql&gt; start transaction;
Query OK, 0 rows affected (0.00 sec)

-- 提交前查询：
mysql&gt; select * from account;
+----+----------+---------+
| id | NAME     | balance |
+----+----------+---------+
|  1 | zhangsan |    1000 |
|  2 | lisi     |    1000 |
+----+----------+---------+
2 rows in set (0.00 sec)

-- 提交后查询：
mysql&gt; select * from account;
+----+----------+---------+
| id | NAME     | balance |
+----+----------+---------+
|  1 | zhangsan |    1000 |
|  2 | lisi     |    1000 |
+----+----------+---------+
2 rows in set (0.00 sec)

-- 说明解决了不可重复读！
mysql&gt; commit;
Query OK, 0 rows affected (0.00 sec)

-- 结束当前事务后，才可以看到其他事务对数据的修改。
mysql&gt; select * from account;
+----+----------+---------+
| id | NAME     | balance |
+----+----------+---------+
|  1 | zhangsan |     500 |
|  2 | lisi     |    1500 |
+----+----------+---------+
2 rows in set (0.00 sec)
-- 同时也引发了幻读：一个事务操作(DML)数据表中所有记录，另一个事务添加了一条数据，则第一个事务查询不到。
</code></pre>
<blockquote>
<p>serializable：串行化</p>
<p>相当于多线程中的锁</p>
</blockquote>
<pre><code class="sql">-- cmd 窗口一：
mysql&gt; set global transaction isolation level serializable;
Query OK, 0 rows affected (0.00 sec)

-- 执行转账操作：
mysql&gt; start transaction;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; update account set balance = balance - 500 where id = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql&gt; update account set balance = balance + 500 where id = 2;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql&gt; commit;
Query OK, 0 rows affected (0.01 sec)
</code></pre>
<pre><code class="sql">-- cmd 窗口二：
mysql&gt; use db_test;
Database changed
mysql&gt; select @@tx_isolation;
+----------------+
| @@tx_isolation |
+----------------+
| SERIALIZABLE   |
+----------------+
1 row in set (0.00 sec)

-- 转账前查询：
mysql&gt; select * from account;
+----+----------+---------+
| id | NAME     | balance |
+----+----------+---------+
|  1 | zhangsan |     500 |
|  2 | lisi     |    1500 |
+----+----------+---------+
2 rows in set (0.00 sec)

-- 开事务后查询，一直等待窗口一中的事务结束
mysql&gt; start transaction;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select * from account;
-- 光标一致停留此处

-- 窗口一提交事务后查询
mysql&gt; select * from account;
+----+----------+---------+
| id | NAME     | balance |
+----+----------+---------+
|  1 | zhangsan |       0 |
|  2 | lisi     |    2000 |
+----+----------+---------+
2 rows in set (0.00 sec)
</code></pre>
<hr>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 jungle8884@163.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>




    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '6763cf342e4c3335d632',
            clientSecret: '91ee1b22f4c8e5eff96b6e0eae5bdda1f6580ebb',
            repo: 'jungle8884.github.io',
            owner: 'jungle8884',
            admin: ['jungle8884'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2016-2020 Jungle
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







<div>
<div id="musicMouseDrag" style="position:fixed; z-index: 9999; bottom: 0; right: 0;">
<div id="musicDragArea" style="position: absolute; top: 0; left: 0; width: 100%;height: 10px;cursor: move; z-index: 10;"></div>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1300287&auto=0&height=66"></iframe>
</div>
<!-- 以下代码是为了支持随时拖动音乐控件的位置，如没有需求，可去掉下面代码 -->
<script>
var $DOC = $(document)
$('#musicMouseDrag').on ('mousedown', function (e) {
// 阻止文本选中
$DOC.bind ("selectstart", function () {
return false;
});
$('#musicDragArea').css ('height', '100%');
var $moveTarget = $('#musicMouseDrag');
$moveTarget.css ('border', '1px dashed grey')
var div_x = e.pageX - $moveTarget.offset ().left;
var div_y = e.pageY - $moveTarget.offset ().top;
$DOC.on ('mousemove', function (e) {
var targetX = e.pageX - div_x;
var targetY = e.pageY - div_y;
targetX = targetX < 0 ? 0 : (targetX + $moveTarget.outerWidth () >= window.innerWidth) ? window.innerWidth - $moveTarget.outerWidth () : targetX;
targetY = targetY < 0 ? 0 : (targetY + $moveTarget.outerHeight () >= window.innerHeight) ? window.innerHeight - $moveTarget.outerHeight () : targetY;
$moveTarget.css ({'left': targetX + 'px', 'top': targetY + 'px', 'bottom': 'inherit', 'right': 'inherit'})
}).on ('mouseup', function () {
$DOC.unbind ("selectstart");
$DOC.off ('mousemove')
$DOC.off ('mouseup')
$moveTarget.css ('border', 'none')
$('#musicDragArea').css ('height', '10px');
})
})
</script>

</html>
